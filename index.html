<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAP Learning - Aprende SAP de forma interactiva</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 24px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">Cargando SAP Learning...</div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Iconos simplificados
        const ChevronRight = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('polyline', { points: '9,18 15,12 9,6' }));

        const ChevronLeft = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('polyline', { points: '15,18 9,12 15,6' }));

        const Check = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('polyline', { points: '20,6 9,17 4,12' }));

        const X = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('line', { x1: '18', y1: '6', x2: '6', y2: '18' }), React.createElement('line', { x1: '6', y1: '6', x2: '18', y2: '18' }));

        const BookOpen = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('path', { d: 'M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z' }), React.createElement('path', { d: 'M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z' }));

        const Code = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('polyline', { points: '16,18 22,12 16,6' }), React.createElement('polyline', { points: '8,6 2,12 8,18' }));

        const Database = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('ellipse', { cx: '12', cy: '5', rx: '9', ry: '3' }), React.createElement('path', { d: 'M21 12c0 1.66-4 3-9 3s-9-1.34-9-3' }), React.createElement('path', { d: 'M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5' }));

        const Award = (props) => React.createElement('svg', {
            ...props,
            width: props.size || 24,
            height: props.size || 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: '2',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, React.createElement('circle', { cx: '12', cy: '8', r: '7' }), React.createElement('polyline', { points: '8.21,13.89 7,23 12,20 17,23 15.79,13.88' }));

        const SAPLearningApp = () => {
            // Estado inicial desde localStorage
            const getInitialState = () => {
                try {
                    const saved = localStorage.getItem('sapLearningProgress');
                    if (saved) {
                        return JSON.parse(saved);
                    }
                } catch (e) {
                    console.error('Error parsing saved data:', e);
                }
                return {
                    currentScreen: 'home',
                    selectedModule: null,
                    selectedLevel: null,
                    selectedSubsection: null,
                    currentLesson: 0,
                    score: 0,
                    completedLessons: {},
                    moduleProgress: {}
                };

                // PCC - TODAS LAS LECCIONES COMPLETAS (25 lecciones)
                lessons.pcc = {
                    beginner: {
                        'conceptos-pcc': [
                            { title: '¿Qué es PCC?', type: 'multiple-choice', question: '¿Qué significa PCC en SAP HCM?', options: ['Personal Control Center', 'Payroll Control Center', 'Process Control Center', 'Personnel Configuration Center'], correct: 1, explanation: 'PCC significa Payroll Control Center, el centro de control de nómina en SAP HCM.' },
                            { title: 'Propósito del PCC', type: 'multiple-choice', question: '¿Cuál es el propósito principal del PCC?', options: ['Calcular salarios manualmente', 'Supervisar y controlar los procesos de nómina de forma centralizada', 'Crear reportes de RRHH', 'Gestionar vacaciones'], correct: 1, explanation: 'El PCC permite supervisar y controlar todos los procesos de nómina desde un punto centralizado.' },
                            { title: 'Componentes del PCC', type: 'fill-blank', question: 'El PCC incluye herramientas para monitoreo, control, ______ y análisis:', placeholder: 'Función principal...', correct: 'simulacion', explanation: 'El PCC incluye herramientas de monitoreo, control, simulación y análisis de procesos de nómina.' },
                            { title: 'Usuarios del PCC', type: 'multiple-choice', question: '¿Quiénes son los usuarios típicos del PCC?', options: ['Solo empleados', 'Solo gerentes de RRHH', 'Administradores de nómina, supervisores y analistas de RRHH', 'Solo el departamento de TI'], correct: 2, explanation: 'El PCC es usado por administradores de nómina, supervisores y analistas de RRHH para gestionar procesos.' },
                            { title: 'Integración con SAP HCM', type: 'multiple-choice', question: '¿Cómo se integra PCC con otros módulos de SAP HCM?', options: ['Funciona de forma independiente', 'Se integra completamente con PA, OM, PT y otros módulos', 'Solo se conecta con PA', 'Requiere interfaces especiales'], correct: 1, explanation: 'PCC se integra completamente con Personnel Administration (PA), Organizational Management (OM), Personnel Time (PT) y otros módulos HCM.' },
                            { title: 'Ventajas del PCC', type: 'fill-blank', question: 'Una ventaja clave del PCC es la ______ en tiempo real de procesos de nómina:', placeholder: 'Capacidad principal...', correct: 'visibilidad', explanation: 'PCC proporciona visibilidad en tiempo real del estado y progreso de todos los procesos de nómina.' },
                            { title: 'Procesos que Gestiona PCC', type: 'multiple-choice', question: '¿Qué procesos puede gestionar el PCC?', options: ['Solo cálculo de nómina regular', 'Solo nóminas extraordinarias', 'Nóminas regulares, extraordinarias, ajustes y simulaciones', 'Solo reportes de nómina'], correct: 2, explanation: 'PCC puede gestionar nóminas regulares, extraordinarias, ajustes, simulaciones y otros procesos relacionados.' },
                            { title: 'Dashboard del PCC', type: 'multiple-choice', question: '¿Qué información muestra típicamente el dashboard del PCC?', options: ['Solo errores de nómina', 'Estado de procesos, estadísticas, alertas y KPIs de nómina', 'Solo datos de empleados', 'Solo información financiera'], correct: 1, explanation: 'El dashboard del PCC muestra estado de procesos, estadísticas, alertas y KPIs relacionados con la nómina.' },
                            { title: 'Automatización en PCC', type: 'fill-blank', question: 'PCC permite la ______ de muchos procesos de nómina para reducir intervención manual:', placeholder: 'Proceso de mejora...', correct: 'automatizacion', explanation: 'La automatización en PCC reduce la necesidad de intervención manual en procesos rutinarios de nómina.' },
                            { title: 'Seguridad en PCC', type: 'multiple-choice', question: '¿Cómo maneja PCC la seguridad y autorizaciones?', options: ['No tiene controles de seguridad', 'Usa el sistema de autorizaciones estándar de SAP', 'Requiere un sistema de seguridad separado', 'Solo permite acceso a administradores'], correct: 1, explanation: 'PCC utiliza el sistema de autorizaciones estándar de SAP para controlar el acceso a funciones y datos.' }
                        ],
                        'configuracion-pcc': [
                            { title: 'Configuración Inicial', type: 'multiple-choice', question: '¿Qué es lo primero que se debe configurar en PCC?', options: ['Los empleados', 'Los esquemas de nómina y parámetros del sistema', 'Los reportes', 'Las autorizaciones'], correct: 1, explanation: 'La configuración inicial requiere definir esquemas de nómina y parámetros básicos del sistema.' },
                            { title: 'Variantes de Nómina', type: 'fill-blank', question: 'En PCC se configuran ______ de nómina para diferentes tipos de empleados:', placeholder: 'Configuraciones específicas...', correct: 'variantes', explanation: 'Las variantes de nómina permiten configuraciones específicas para diferentes grupos de empleados.' },
                            { title: 'Períodos de Nómina', type: 'multiple-choice', question: '¿Cómo se definen los períodos de nómina en PCC?', options: ['Solo mensualmente', 'Se configuran según las necesidades: semanal, quincenal, mensual, etc.', 'Solo anualmente', 'Automáticamente por el sistema'], correct: 1, explanation: 'Los períodos de nómina se pueden configurar según necesidades: semanal, quincenal, mensual, etc.' },
                            { title: 'Clusters de Nómina', type: 'multiple-choice', question: '¿Qué son los clusters en la configuración de PCC?', options: ['Grupos de empleados', 'Estructuras de datos que almacenan resultados de nómina', 'Tipos de reportes', 'Configuraciones de seguridad'], correct: 1, explanation: 'Los clusters son estructuras de datos especializadas que almacenan los resultados de los cálculos de nómina.' },
                            { title: 'Configuración de Alertas', type: 'fill-blank', question: 'PCC permite configurar ______ automáticas para notificar sobre errores o situaciones especiales:', placeholder: 'Sistema de notificaciones...', correct: 'alertas', explanation: 'Las alertas automáticas notifican sobre errores, excepciones o situaciones que requieren atención.' },
                            { title: 'Configuración de Workflows', type: 'multiple-choice', question: '¿Para qué se usan los workflows en PCC?', options: ['Solo para aprobaciones', 'Para automatizar procesos y rutear tareas según reglas de negocio', 'Solo para reportes', 'Para backup de datos'], correct: 1, explanation: 'Los workflows automatizan procesos y rutean tareas según reglas de negocio predefinidas.' },
                            { title: 'Parámetros de Sistema', type: 'multiple-choice', question: '¿Qué tipo de parámetros se configuran a nivel de sistema en PCC?', options: ['Solo fechas', 'Configuraciones globales como monedas, calendarios, y reglas generales', 'Solo nombres de empleados', 'Solo códigos de nómina'], correct: 1, explanation: 'Los parámetros de sistema incluyen configuraciones globales como monedas, calendarios y reglas generales.' },
                            { title: 'Configuración de Interfaces', type: 'fill-blank', question: 'PCC requiere configurar ______ con sistemas externos como bancos o entidades gubernamentales:', placeholder: 'Conexiones externas...', correct: 'interfaces', explanation: 'Las interfaces permiten intercambio de datos con sistemas externos como bancos y entidades gubernamentales.' }
                        ],
                        'monitoreo-pcc': [
                            { title: 'Monitoreo en Tiempo Real', type: 'multiple-choice', question: '¿Qué permite el monitoreo en tiempo real en PCC?', options: ['Solo ver errores pasados', 'Supervisar el progreso actual de los procesos de nómina', 'Solo generar reportes mensuales', 'Solo verificar datos de empleados'], correct: 1, explanation: 'El monitoreo en tiempo real permite supervisar el progreso actual de todos los procesos de nómina.' },
                            { title: 'Indicadores de Estado', type: 'fill-blank', question: 'PCC utiliza ______ visuales para mostrar el estado de los procesos (verde, amarillo, rojo):', placeholder: 'Sistema visual...', correct: 'indicadores', explanation: 'Los indicadores de estado usan colores (verde, amarillo, rojo) para mostrar el estado de los procesos.' },
                            { title: 'Control de Errores', type: 'multiple-choice', question: '¿Cómo maneja PCC los errores en procesos de nómina?', options: ['Los ignora automáticamente', 'Los registra, categoriza y permite su resolución sistemática', 'Solo los reporta al final del mes', 'Los corrige automáticamente'], correct: 1, explanation: 'PCC registra, categoriza errores y proporciona herramientas para su resolución sistemática.' },
                            { title: 'Reportes de Control', type: 'multiple-choice', question: '¿Qué tipos de reportes de control genera PCC?', options: ['Solo reportes financieros', 'Reportes de proceso, excepción, validación y estadísticos', 'Solo reportes de empleados', 'No genera reportes'], correct: 1, explanation: 'PCC genera diversos reportes: de proceso, excepción, validación y estadísticos para control completo.' },
                            { title: 'Simulaciones de Nómina', type: 'fill-blank', question: 'PCC permite realizar ______ antes del cálculo real para detectar problemas:', placeholder: 'Procesos de prueba...', correct: 'simulaciones', explanation: 'Las simulaciones permiten probar cálculos de nómina antes de la ejecución real para detectar problemas.' },
                            { title: 'Auditoría de Procesos', type: 'multiple-choice', question: '¿Qué información proporciona la auditoría de procesos en PCC?', options: ['Solo datos financieros', 'Rastro completo de quién, qué, cuándo y cómo se procesaron las nóminas', 'Solo errores críticos', 'Solo información de empleados'], correct: 1, explanation: 'La auditoría proporciona un rastro completo de quién, qué, cuándo y cómo se procesaron las nóminas.' },
                            { title: 'Control de Calidad', type: 'fill-blank', question: 'PCC incluye verificaciones de ______ para asegurar la precisión de los cálculos:', placeholder: 'Verificación de precisión...', correct: 'calidad', explanation: 'Las verificaciones de calidad aseguran que los cálculos de nómina sean precisos y consistentes.' }
                        ]
                    }
                };
            };

            const [appState, setAppState] = useState(getInitialState());
            const [userAnswer, setUserAnswer] = useState('');
            const [showResult, setShowResult] = useState(false);
            const [isCorrect, setIsCorrect] = useState(false);

            // Guardar progreso en localStorage
            useEffect(() => {
                try {
                    localStorage.setItem('sapLearningProgress', JSON.stringify(appState));
                } catch (e) {
                    console.error('Error saving progress:', e);
                }
            }, [appState]);

            // Función para actualizar estado
            const updateAppState = (updates) => {
                setAppState(prev => ({ ...prev, ...updates }));
            };

            // Datos de la aplicación
            const modules = {
                abap: {
                    title: 'ABAP',
                    icon: Code,
                    description: 'Aprende programación en SAP ABAP',
                    color: 'bg-blue-50 border-blue-200'
                },
                schemas: {
                    title: 'Esquemas SAP',
                    icon: Database,
                    description: 'Domina los esquemas y estructuras de SAP',
                    color: 'bg-green-50 border-green-200'
                },
                pcc: {
                    title: 'PCC (Payroll Control Center)',
                    icon: Database,
                    description: 'Centro de Control de Nómina - Gestión y monitoreo',
                    color: 'bg-purple-50 border-purple-200'
                }
            };

            const levels = {
                beginner: {
                    title: 'Principiante',
                    description: 'Conceptos básicos y fundamentos',
                    icon: '🌱'
                },
                intermediate: {
                    title: 'Intermedio',
                    description: 'Configuración y aplicación práctica',
                    icon: '🚀'
                },
                advanced: {
                    title: 'Avanzado',
                    description: 'Optimización y casos complejos',
                    icon: '⭐'
                }
            };

            const subsections = {
                abap: {
                    beginner: {
                        'fundamentos': {
                            title: 'Fundamentos ABAP',
                            description: 'Variables, tipos de datos, estructuras básicas',
                            icon: '📚',
                            color: 'bg-blue-50'
                        },
                    intermediate: {
                        'esquemas-avanzados': [
                            { title: 'Configuración de Esquemas', type: 'multiple-choice', question: '¿En qué transacción se configuran los esquemas de contabilización automática?', options: ['OB41', 'OBX1', 'OBYC', 'OBA1'], correct: 0, explanation: 'OB41 es la transacción para configurar esquemas de contabilización automática en SAP.' },
                            { title: 'Asignación de Esquemas', type: 'fill-blank', question: 'Los esquemas se asignan a ______ o ______ específicos:', code: 'Sociedad: 1000\nEsquema: RMCL00\nClase de Movimiento: BSX', placeholder: 'Elementos de configuración...', correct: 'sociedades', explanation: 'Los esquemas se asignan a sociedades específicas o a tipos de operaciones/movimientos.' },
                            { title: 'Debugging de Esquemas', type: 'multiple-choice', question: '¿Qué herramienta se usa para hacer debug de esquemas SAP?', options: ['SE80', 'SE11', 'Depurador ABAP', 'ST05'], correct: 2, explanation: 'El depurador ABAP permite hacer debug de esquemas para ver el flujo de ejecución paso a paso.' },
                            { title: 'Tablas de Configuración', type: 'fill-blank', question: 'Los esquemas se almacenan en la tabla ______:', placeholder: 'Nombre de tabla...', correct: 'gb01', explanation: 'La tabla GB01 contiene la configuración de los esquemas y sus pasos.' },
                            { title: 'Validación de Esquemas', type: 'multiple-choice', question: '¿Cuándo se ejecutan los esquemas de validación?', options: ['Solo al crear documentos', 'Solo al modificar documentos', 'Al crear y modificar documentos', 'Solo al consultar documentos'], correct: 2, explanation: 'Los esquemas de validación se ejecutan tanto al crear como al modificar documentos contables.' },
                            { title: 'Esquemas de Sustitución vs Validación', type: 'multiple-choice', question: '¿Cuál es la diferencia principal entre esquemas de sustitución y validación?', options: ['No hay diferencia', 'Sustitución cambia valores, Validación los verifica', 'Validación es más rápida', 'Sustitución solo funciona en FI'], correct: 1, explanation: 'Los esquemas de sustitución modifican/reemplazan valores automáticamente, mientras que los de validación solo verifican que cumplan reglas.' },
                            { title: 'Prerrequisitos de Esquemas', type: 'fill-blank', question: 'Los esquemas de validación pueden tener ______ que deben cumplirse antes de ejecutarse:', placeholder: 'Condiciones previas...', correct: 'prerrequisitos', explanation: 'Los prerrequisitos son condiciones que determinan si el esquema debe ejecutarse o no.' },
                            { title: 'Mensajes en Esquemas', type: 'multiple-choice', question: '¿Qué tipos de mensajes pueden generar los esquemas de validación?', options: ['Solo errores (E)', 'Solo warnings (W)', 'Errores (E), Warnings (W) e Informativos (I)', 'Solo informativos (I)'], correct: 2, explanation: 'Los esquemas pueden generar mensajes de error (E), warning (W) e informativos (I) según la situación.' },
                            { title: 'Esquemas por Aplicación', type: 'multiple-choice', question: '¿En qué módulos de SAP se pueden usar esquemas?', options: ['Solo en FI (Finanzas)', 'Solo en HR (Recursos Humanos)', 'En múltiples módulos: FI, CO, HR, MM, etc.', 'Solo en módulos financieros'], correct: 2, explanation: 'Los esquemas se usan en múltiples módulos SAP: FI, CO, HR, MM, SD y otros según necesidades.' },
                            { title: 'Parámetros en Esquemas', type: 'fill-blank', question: 'Los esquemas pueden recibir ______ para modificar su comportamiento dinámicamente:', placeholder: 'Valores de entrada...', correct: 'parametros', explanation: 'Los parámetros permiten que los esquemas se adapten según valores específicos pasados en tiempo de ejecución.' },
                            { title: 'Esquemas Anidados', type: 'multiple-choice', question: '¿Qué permite el anidamiento de esquemas?', options: ['Mayor velocidad de procesamiento', 'Reutilización y modularización de lógica compleja', 'Menor uso de memoria', 'Simplificación automática'], correct: 1, explanation: 'El anidamiento permite reutilizar esquemas pequeños dentro de esquemas más complejos, mejorando la modularización.' },
                            { title: 'Testing de Esquemas', type: 'multiple-choice', question: '¿Cuál es la mejor práctica para probar esquemas antes de producción?', options: ['Probar solo con datos reales', 'Usar datos de prueba representativos en ambiente de desarrollo', 'Probar directamente en producción', 'No es necesario probar'], correct: 1, explanation: 'Usar datos de prueba representativos en desarrollo permite identificar problemas sin afectar datos reales.' },
                            { title: 'Rollback en Esquemas', type: 'fill-blank', question: 'Si un esquema falla, SAP puede hacer ______ de toda la transacción:', placeholder: 'Acción de recuperación...', correct: 'rollback', explanation: 'El rollback deshace todos los cambios de la transacción si un esquema crítico falla, manteniendo la integridad.' },
                            { title: 'Migración de Esquemas', type: 'multiple-choice', question: '¿Qué considerar al migrar esquemas entre versiones de SAP?', options: ['Solo la sintaxis', 'Compatibilidad, nuevas funciones y cambios en la lógica de negocio', 'Solo el rendimiento', 'No hay consideraciones especiales'], correct: 1, explanation: 'La migración requiere verificar compatibilidad, aprovechar nuevas funciones y adaptar cambios en lógica de negocio.' }
                        ]
                    },
                    advanced: {
                        'optimizacion': [
                            { title: 'Esquemas Complejos', type: 'multiple-choice', question: '¿Cuál es la mejor práctica para esquemas con muchos pasos?', options: ['Usar un solo esquema grande', 'Dividir en múltiples esquemas más pequeños', 'Evitar usar esquemas', 'Usar solo validaciones manuales'], correct: 1, explanation: 'Es mejor dividir esquemas complejos en múltiples esquemas más pequeños y manejables.' },
                            { title: 'Optimización de Performance', type: 'fill-blank', question: 'Para mejorar el rendimiento, las condiciones más ______ deben ir primero:', placeholder: 'Tipo de condición...', correct: 'restrictivas', explanation: 'Las condiciones más restrictivas deben ir primero para filtrar rápidamente y evitar procesamiento innecesario.' },
                            { title: 'Gestión de Errores', type: 'multiple-choice', question: '¿Qué sucede cuando un esquema encuentra un error durante la ejecución?', options: ['Continúa con el siguiente paso', 'Se detiene y revierte toda la transacción', 'Solo revierte el paso actual', 'Genera un warning y continúa'], correct: 1, explanation: 'Los errores en esquemas detienen la ejecución y revierten toda la transacción para mantener la integridad.' }
                        ]
                    }
                };
                    // ABAP AVANZADO
                    advanced: {
                        'patrones-diseno': [
                            { title: 'Factory Pattern', type: 'multiple-choice', question: '¿Cuál es el beneficio principal del patrón Factory?', options: ['Mejora el rendimiento', 'Centraliza la creación de objetos', 'Reduce el uso de memoria', 'Simplifica la herencia'], correct: 1, explanation: 'El patrón Factory centraliza y controla la creación de objetos.' },
                            { title: 'Singleton Pattern', type: 'fill-blank', question: 'Implementa el patrón Singleton:', code: 'CLASS-DATA: go_instance TYPE REF TO lcl_singleton.\nCLASS-METHODS: get_instance RETURNING VALUE(ro_instance) TYPE REF TO lcl_singleton.\n\nMETHOD get_instance.\n  IF go_instance IS ______.\n    go_instance = NEW #( ).\n  ENDIF.\n  ro_instance = go_instance.\nENDMETHOD.', placeholder: 'Condición...', correct: 'initial', explanation: 'Se verifica si la instancia IS INITIAL antes de crearla por primera vez.' }
                        ],
                        'performance': [
                            { title: 'Optimización SQL', type: 'multiple-choice', question: '¿Cuál es la mejor práctica para consultas SQL en ABAP?', options: ['Usar SELECT *', 'Usar SELECT con campos específicos', 'Usar múltiples SELECT individuales', 'Evitar WHERE clause'], correct: 1, explanation: 'SELECT con campos específicos reduce transferencia de datos y mejora rendimiento.' },
                            { title: 'Índices de Base de Datos', type: 'fill-blank', question: 'Los índices mejoran el rendimiento de consultas con cláusula ______:', placeholder: 'Cláusula SQL...', correct: 'where', explanation: 'Los índices aceleran las consultas que usan WHERE para filtrar datos.' }
                        ]
                    }
                };

                // ESQUEMAS SAP - TODAS LAS LECCIONES COMPLETAS
                lessons.schemas = {
                    beginner: {
                        'conceptos-basicos': [
                            { title: '¿Qué es un Esquema SAP?', type: 'multiple-choice', question: '¿Cuál es la definición correcta de un esquema en SAP?', options: ['Una tabla de base de datos', 'Un conjunto de reglas y cálculos que se ejecutan automáticamente', 'Un reporte de datos', 'Una transacción específica'], correct: 1, explanation: 'Un esquema SAP es un conjunto de reglas, cálculos y validaciones que se ejecutan automáticamente en procesos específicos.' },
                            { title: 'Tipos de Esquemas', type: 'multiple-choice', question: '¿Cuáles son los tres tipos principales de esquemas en SAP?', options: ['Cálculo, Validación y Sustitución', 'Entrada, Proceso y Salida', 'Maestro, Transaccional y Histórico', 'Activo, Pasivo y Neutral'], correct: 0, explanation: 'Los tres tipos principales son: Esquemas de Cálculo, Esquemas de Validación y Esquemas de Sustitución.' },
                            { title: 'Estructura de un Esquema', type: 'fill-blank', question: 'Un esquema SAP está compuesto por una secuencia de ______:', placeholder: 'Completa la palabra...', correct: 'pasos', explanation: 'Los esquemas están compuestos por una secuencia de pasos que se ejecutan en orden.' },
                            { title: 'Pasos en un Esquema', type: 'multiple-choice', question: '¿Qué elementos principales contiene un paso de esquema?', options: ['Solo una condición', 'Solo una cuenta', 'Condición, Cuenta y Asignación', 'Solo una asignación'], correct: 2, explanation: 'Cada paso contiene: Condición (cuándo se ejecuta), Cuenta (qué cuenta afecta) y Asignación (cómo se calcula).' },
                            { title: 'Condiciones en Esquemas', type: 'fill-blank', question: 'Las condiciones en los esquemas se evalúan como ______ o ______:', code: 'Paso: 010\nCondición: KOART = \'D\'\nCuenta: 400000\nAsignación: +', placeholder: 'Dos estados posibles...', correct: 'verdadero', explanation: 'Las condiciones se evalúan como Verdadero (TRUE) o Falso (FALSE) para determinar si el paso se ejecuta.' },
                            { title: 'Tipos de Asignación', type: 'multiple-choice', question: '¿Cuál es el significado del signo "+" en la asignación de un esquema?', options: ['Resta el importe', 'Suma el importe', 'Multiplica el importe', 'Ignora el importe'], correct: 1, explanation: 'El signo "+" significa que el importe se suma (débito), mientras que "-" significa que se resta (crédito).' },
                            { title: 'Secuencia de Pasos', type: 'fill-blank', question: 'Los pasos en un esquema se numeran típicamente de ______ en ______:', code: 'Paso: 010\nPaso: 020\nPaso: 030\nPaso: 040', placeholder: 'Incremento numérico...', correct: '10', explanation: 'Los pasos se numeran típicamente de 10 en 10 (010, 020, 030...) para permitir insertar pasos intermedios.' },
                            { title: 'Ejecución Condicional', type: 'multiple-choice', question: '¿Qué sucede si la condición de un paso es FALSE?', options: ['Se ejecuta el paso', 'Se omite el paso', 'Se detiene el esquema', 'Se genera un error'], correct: 1, explanation: 'Si la condición es FALSE, el paso se omite y el esquema continúa con el siguiente paso.' },
                            { title: 'Cuentas en Esquemas', type: 'fill-blank', question: 'En los esquemas de contabilización, las cuentas se especifican usando números de ______:', placeholder: 'Tipo de cuenta...', correct: 'mayor', explanation: 'Las cuentas se especifican usando números de cuenta de mayor (GL accounts).' },
                            { title: 'Elementos de Control', type: 'multiple-choice', question: '¿Cuál es la función del elemento de control en un esquema?', options: ['Almacenar datos', 'Controlar el flujo de ejecución', 'Generar reportes', 'Validar usuarios'], correct: 1, explanation: 'Los elementos de control determinan el flujo de ejecución del esquema, como saltos condicionales o bucles.' },
                            { title: 'Esquemas de Cálculo', type: 'multiple-choice', question: '¿En qué módulo se usan principalmente los esquemas de cálculo?', options: ['Finanzas (FI)', 'Recursos Humanos (HR)', 'Materiales (MM)', 'Ventas (SD)'], correct: 1, explanation: 'Los esquemas de cálculo se usan principalmente en HR para calcular nóminas y beneficios.' },
                            { title: 'Esquemas de Validación', type: 'fill-blank', question: 'Los esquemas de validación verifican que los datos cumplan con ______:', placeholder: 'Qué verifican...', correct: 'reglas', explanation: 'Los esquemas de validación verifican que los datos cumplan con reglas de negocio específicas.' },
                            { title: 'Esquemas de Sustitución', type: 'multiple-choice', question: '¿Qué hacen los esquemas de sustitución?', options: ['Validan datos', 'Calculan importes', 'Reemplazan valores automáticamente', 'Generan reportes'], correct: 2, explanation: 'Los esquemas de sustitución reemplazan automáticamente valores en campos específicos.' },
                            { title: 'Activación de Esquemas', type: 'multiple-choice', question: '¿Cuándo se ejecutan los esquemas en SAP?', options: ['Solo manualmente', 'Automáticamente durante transacciones específicas', 'Solo en batch jobs', 'Solo al final del día'], correct: 1, explanation: 'Los esquemas se ejecutan automáticamente durante las transacciones donde están configurados.' },
                            { title: 'Orden de Ejecución', type: 'fill-blank', question: 'Los pasos de un esquema se ejecutan en orden ______:', placeholder: 'Tipo de orden...', correct: 'secuencial', explanation: 'Los pasos se ejecutan en orden secuencial según su numeración.' },
                            { title: 'Variables de Sistema en Esquemas', type: 'multiple-choice', question: '¿Qué variable del sistema contiene la fecha actual en esquemas?', options: ['SY-DATUM', 'SY-UZEIT', 'SY-MANDT', 'SY-LANGU'], correct: 0, explanation: 'SY-DATUM contiene la fecha actual del sistema y se puede usar en condiciones de esquemas.' },
                            { title: 'Esquemas Jerárquicos', type: 'multiple-choice', question: '¿Qué permite la jerarquía en esquemas complejos?', options: ['Solo validación de datos', 'Llamar a otros esquemas desde un esquema principal', 'Mejorar el rendimiento', 'Reducir la complejidad'], correct: 1, explanation: 'La jerarquía permite que un esquema principal llame a sub-esquemas para modularizar la lógica.' },
                            { title: 'Contexto de Esquemas', type: 'fill-blank', question: 'El contexto determina en qué ______ del proceso se ejecuta el esquema:', placeholder: 'Momento específico...', correct: 'momento', explanation: 'El contexto define cuándo y en qué momento del proceso de negocio se ejecuta el esquema.' },
                            { title: 'Esquemas Dinámicos', type: 'multiple-choice', question: '¿Qué característica tienen los esquemas dinámicos?', options: ['Se ejecutan más rápido', 'Pueden modificar su comportamiento según datos en tiempo de ejecución', 'Solo funcionan en batch', 'No requieren configuración'], correct: 1, explanation: 'Los esquemas dinámicos adaptan su comportamiento según los datos y condiciones en tiempo de ejecución.' }
                        ],
                        'configuracion': [
                            { title: 'Creación de Esquemas', type: 'multiple-choice', question: '¿En qué herramienta se crean los esquemas SAP?', options: ['SE80', 'SPRO (IMG)', 'SE11', 'SM30'], correct: 1, explanation: 'Los esquemas se crean y configuran en SPRO (Implementation Guide).' },
                            { title: 'Naming Convention', type: 'fill-blank', question: 'Los esquemas personalizados deben comenzar con ______ o ______:', placeholder: 'Prefijos...', correct: 'z', explanation: 'Los esquemas personalizados deben comenzar con Z o Y para distinguirlos de los estándar.' },
                            { title: 'Copia de Esquemas', type: 'multiple-choice', question: '¿Cuál es la mejor práctica al crear esquemas personalizados?', options: ['Crear desde cero', 'Copiar un esquema estándar y modificarlo', 'Usar solo esquemas SAP', 'Evitar usar esquemas'], correct: 1, explanation: 'Es mejor copiar un esquema estándar similar y modificarlo según necesidades.' },
                            { title: 'Transporte de Esquemas', type: 'multiple-choice', question: '¿Cómo se transportan los esquemas entre sistemas?', options: ['Manualmente', 'Mediante órdenes de transporte', 'Por email', 'No se pueden transportar'], correct: 1, explanation: 'Los esquemas se transportan mediante órdenes de transporte como otras configuraciones.' },
                            { title: 'Pruebas de Esquemas', type: 'fill-blank', question: 'Antes de activar un esquema en producción, se debe probar en ______:', placeholder: 'Tipo de sistema...', correct: 'desarrollo', explanation: 'Los esquemas deben probarse exhaustivamente en desarrollo antes de pasar a producción.' },
                            { title: 'Documentación de Esquemas', type: 'multiple-choice', question: '¿Qué información debe documentarse en un esquema?', options: ['Solo el nombre', 'Propósito, lógica y casos de uso', 'Solo los pasos', 'Solo el autor'], correct: 1, explanation: 'Se debe documentar el propósito, lógica de negocio, casos de uso y mantenimiento.' },
                            { title: 'Versionado de Esquemas', type: 'fill-blank', question: 'Es importante mantener ______ de los esquemas para control de cambios:', placeholder: 'Qué mantener...', correct: 'versiones', explanation: 'El versionado permite rastrear cambios y revertir a versiones anteriores si es necesario.' },
                            { title: 'Backup de Configuración', type: 'multiple-choice', question: '¿Cuándo es crítico hacer backup de la configuración de esquemas?', options: ['Solo al final del año', 'Antes de cualquier cambio importante', 'Solo cuando hay problemas', 'Nunca es necesario'], correct: 1, explanation: 'Siempre hacer backup antes de cambios importantes para poder recuperar la configuración anterior.' },
                            { title: 'Esquemas por Sociedad', type: 'multiple-choice', question: '¿Se pueden tener esquemas diferentes por sociedad en SAP?', options: ['No, todos usan el mismo esquema', 'Sí, cada sociedad puede tener su configuración específica', 'Solo en ciertos módulos', 'Solo si son multinacionales'], correct: 1, explanation: 'Cada sociedad puede tener esquemas específicos según sus requerimientos de negocio y legales.' },
                            { title: 'Monitoreo de Esquemas', type: 'fill-blank', question: 'Para monitorear el funcionamiento de esquemas se pueden usar ______:', placeholder: 'Herramientas de seguimiento...', correct: 'logs', explanation: 'Los logs y herramientas de monitoreo permiten verificar que los esquemas funcionen correctamente.' }
                        ]
                    },
                    // ABAP INTERMEDIO - TODAS LAS LECCIONES
                    intermediate: {
                        'abap-oo': [
                            { title: 'Definición de Clase', type: 'fill-blank', question: 'Completa la definición de una clase:', code: '______ lcl_empleado DEFINITION.\n  PUBLIC SECTION.\n    DATA: mv_nombre TYPE string.\n  PRIVATE SECTION.\n    DATA: mv_salario TYPE p.\n______.', placeholder: 'Palabras clave...', correct: 'class', explanation: 'Las clases se definen con CLASS...ENDCLASS en ABAP.' },
                            { title: 'Secciones de Visibilidad', type: 'multiple-choice', question: '¿En qué sección declararías un método que solo debe ser accesible desde subclases?', options: ['PUBLIC SECTION', 'PRIVATE SECTION', 'PROTECTED SECTION', 'FRIEND SECTION'], correct: 2, explanation: 'PROTECTED SECTION es accesible desde la misma clase y sus subclases.' },
                            { title: 'Atributos de Clase', type: 'multiple-choice', question: '¿Cuál es la diferencia entre atributos de instancia y de clase?', options: ['No hay diferencia', 'Instancia: cada objeto tiene su copia, Clase: compartido por todos', 'Instancia es más rápido', 'Clase es obsoleto'], correct: 1, explanation: 'Atributos de instancia: cada objeto tiene su propia copia. Atributos de clase: compartidos por todas las instancias.' },
                            { title: 'Declaración de Atributos de Clase', type: 'fill-blank', question: 'Declara un atributo de clase:', code: 'PUBLIC SECTION.\n  ______-DATA: gv_contador TYPE i.', placeholder: 'Palabra clave...', correct: 'class', explanation: 'CLASS-DATA declara atributos que pertenecen a la clase, no a la instancia.' },
                            { title: 'Constructor de Clase', type: 'multiple-choice', question: '¿Cuál es el nombre del método constructor en ABAP OO?', options: ['constructor', 'new', 'init', 'create'], correct: 0, explanation: 'El método constructor se llama "constructor" en ABAP OO.' },
                            { title: 'Constructor de Clase vs Instancia', type: 'multiple-choice', question: '¿Cuál es la diferencia entre constructor y class_constructor?', options: ['Son sinónimos', 'constructor: se ejecuta al crear instancia, class_constructor: se ejecuta al cargar la clase', 'class_constructor es obsoleto', 'constructor es más rápido'], correct: 1, explanation: 'constructor se ejecuta al crear cada instancia, class_constructor se ejecuta una sola vez al cargar la clase.' },
                            { title: 'Implementación de Métodos', type: 'fill-blank', question: 'Completa la implementación del método:', code: 'CLASS lcl_empleado IMPLEMENTATION.\n  ______ constructor.\n    mv_nombre = \'Sin nombre\'.\n  ______.\nENDCLASS.', placeholder: 'Palabras clave...', correct: 'method', explanation: 'Los métodos se implementan con METHOD...ENDMETHOD.' },
                            { title: 'Parámetros de Métodos - IMPORTING', type: 'multiple-choice', question: '¿Qué tipo de parámetros se declaran con IMPORTING?', options: ['Parámetros de salida', 'Parámetros de entrada', 'Parámetros de entrada/salida', 'Parámetros opcionales'], correct: 1, explanation: 'IMPORTING declara parámetros que el método recibe desde el exterior.' },
                            { title: 'Parámetros de Métodos - EXPORTING', type: 'fill-blank', question: 'Completa la declaración de un método con parámetro de salida:', code: 'METHODS: get_datos\n  ______ ev_nombre TYPE string\n           ev_edad TYPE i.', placeholder: 'Palabra clave...', correct: 'exporting', explanation: 'EXPORTING declara parámetros que el método devuelve al exterior.' },
                            { title: 'Parámetros RETURNING', type: 'multiple-choice', question: '¿Cuál es la ventaja de usar RETURNING en lugar de EXPORTING?', options: ['Es más rápido', 'Permite sintaxis funcional (método como expresión)', 'Usa menos memoria', 'Es más seguro'], correct: 1, explanation: 'RETURNING permite usar el método como una expresión funcional, más limpio y legible.' },
                            { title: 'Instanciación de Objetos - Clásica', type: 'fill-blank', question: 'Completa la instanciación clásica:', code: 'DATA: lo_empleado TYPE REF TO lcl_empleado.\n______ OBJECT lo_empleado.', placeholder: 'Comando...', correct: 'create', explanation: 'CREATE OBJECT es la forma clásica de instanciar objetos en ABAP.' },
                            { title: 'Instanciación de Objetos - Moderna', type: 'multiple-choice', question: '¿Cuál es la forma moderna de crear una instancia de objeto?', options: ['CREATE OBJECT lo_emp', 'lo_emp = NEW lcl_empleado( )', 'INSTANTIATE lo_emp TYPE lcl_empleado', 'lo_emp = lcl_empleado=>new( )'], correct: 1, explanation: 'NEW es la forma moderna de instanciar objetos en ABAP 7.4+.' },
                            { title: 'Llamada a Métodos', type: 'fill-blank', question: 'Completa la llamada a un método:', code: 'lo_empleado->______( iv_nombre = \'Juan\' ).', placeholder: 'Operador...', correct: 'set_nombre', explanation: 'El operador -> se usa para llamar métodos de una instancia.' },
                            { title: 'Métodos Estáticos', type: 'fill-blank', question: 'Declara un método estático:', code: 'PUBLIC SECTION.\n  ______-METHODS: get_contador RETURNING VALUE(rv_count) TYPE i.', placeholder: 'Palabra clave...', correct: 'class', explanation: 'CLASS-METHODS declara métodos estáticos que pertenecen a la clase, no a la instancia.' }
                        ],
                        'field-symbols': [
                            { title: 'Declaración de Field Symbol', type: 'fill-blank', question: 'Declara un field symbol:', code: '______-SYMBOLS: <fs_empleado> TYPE ty_empleado.', placeholder: 'Palabra clave...', correct: 'field', explanation: 'FIELD-SYMBOLS declara un field symbol que actúa como puntero.' },
                            { title: 'Sintaxis de Field Symbol', type: 'multiple-choice', question: '¿Cuál es la sintaxis correcta para declarar un field symbol?', options: ['FIELD-SYMBOL: <fs_data> TYPE string', 'FIELD-SYMBOLS: <fs_data> TYPE string', 'FIELD-SYMBOL: fs_data TYPE string', 'FIELD-SYMBOLS: fs_data TYPE string'], correct: 1, explanation: 'FIELD-SYMBOLS con los símbolos < > es la sintaxis correcta.' },
                            { title: 'Asignación de Field Symbol', type: 'fill-blank', question: 'Asigna una variable al field symbol:', code: '______ <fs_empleado> TO ls_empleado.', placeholder: 'Comando...', correct: 'assign', explanation: 'ASSIGN vincula un field symbol a una variable o área de memoria.' },
                            { title: 'Verificación de Asignación', type: 'multiple-choice', question: '¿Cómo verificas si un field symbol está asignado?', options: ['IF <fs_data> IS ASSIGNED', 'IF <fs_data> IS NOT INITIAL', 'IF <fs_data> IS BOUND', 'IF <fs_data> IS ACTIVE'], correct: 0, explanation: 'IS ASSIGNED verifica si un field symbol está apuntando a algún dato.' },
                            { title: 'Ventajas de Field Symbols', type: 'multiple-choice', question: '¿Cuál es la principal ventaja de usar field symbols?', options: ['Ocupan menos memoria', 'Son más seguros', 'Mejoran el rendimiento al evitar copias de datos', 'Son más fáciles de usar'], correct: 2, explanation: 'Los field symbols apuntan directamente a la memoria, evitando copias costosas de datos.' }
                        ],
                        'modularizacion': [
                            { title: 'Módulos de Función', type: 'multiple-choice', question: '¿Cuál es la principal ventaja de los módulos de función?', options: ['Son más rápidos', 'Permiten reutilización de código', 'Ocupan menos memoria', 'Son más seguros'], correct: 1, explanation: 'Los módulos de función permiten reutilizar código y centralizar lógica común.' },
                            { title: 'Llamada a Función', type: 'fill-blank', question: 'Completa la llamada a un módulo de función:', code: '______ FUNCTION \'Z_CALCULAR_IMPUESTO\'\n  EXPORTING\n    iv_importe = lv_importe\n  IMPORTING\n    ev_impuesto = lv_impuesto.', placeholder: 'Comando...', correct: 'call', explanation: 'CALL FUNCTION es el comando para ejecutar un módulo de función.' },
                            { title: 'Verificación de Función', type: 'multiple-choice', question: '¿Qué debes verificar después de llamar a una función?', options: ['SY-TABIX', 'SY-SUBRC', 'SY-INDEX', 'SY-UNAME'], correct: 1, explanation: 'SY-SUBRC indica si la función se ejecutó correctamente (0) o hubo error.' }
                        ],
                        'debugging': [
                            { title: 'Activación del Debugger', type: 'multiple-choice', question: '¿Cuál es la forma más común de activar el debugger en ABAP?', options: ['F8', '/H en el campo de comandos', 'Ctrl+D', 'Alt+F12'], correct: 1, explanation: 'Escribir /H en el campo de comandos SAP activa el debugger para la siguiente acción.' },
                            { title: 'Tipos de Debugger', type: 'multiple-choice', question: '¿Cuáles son los dos tipos principales de debugger en SAP?', options: ['Classic y Modern', 'Classical y New', 'Old y Advanced', 'Standard y Extended'], correct: 1, explanation: 'SAP tiene el Classical Debugger y el New Debugger (más moderno y con mejor interfaz).' },
                            { title: 'Breakpoints de Línea', type: 'fill-blank', question: 'Para poner un breakpoint en una línea específica, haces doble clic en:', placeholder: 'Dónde haces clic...', correct: 'margen', explanation: 'Doble clic en el margen izquierdo del editor coloca un breakpoint en esa línea.' },
                            { title: 'Comando BREAK-POINT', type: 'fill-blank', question: 'Completa el comando para insertar un breakpoint dinámico en el código:', code: 'DATA: lv_valor TYPE i.\nlv_valor = 10.\n______-POINT.\nWRITE: lv_valor.', placeholder: 'Comando...', correct: 'break', explanation: 'BREAK-POINT inserta un breakpoint hard-coded que siempre detiene la ejecución.' },
                            { title: 'Navegación en el Debugger', type: 'multiple-choice', question: '¿Qué hace la tecla F5 en el debugger?', options: ['Ejecuta hasta el siguiente breakpoint', 'Ejecuta paso a paso (Step Into)', 'Sale del debugger', 'Ejecuta la línea actual sin entrar en subcódigo'], correct: 1, explanation: 'F5 ejecuta paso a paso entrando en funciones, métodos y subrutinas (Step Into).' },
                            { title: 'Tecla F6 en Debugger', type: 'multiple-choice', question: '¿Qué hace la tecla F6 en el debugger?', options: ['Step Into (entra en subcódigo)', 'Step Over (ejecuta sin entrar en subcódigo)', 'Continue (continúa ejecución)', 'Step Return (sale de la función actual)'], correct: 1, explanation: 'F6 ejecuta la línea actual sin entrar en funciones o métodos (Step Over).' },
                            { title: 'Tecla F7 en Debugger', type: 'fill-blank', question: 'La tecla F7 se usa para hacer ______ Return:', placeholder: 'Tipo de acción...', correct: 'step', explanation: 'F7 es Step Return, sale de la función/método actual y regresa al código que lo llamó.' },
                            { title: 'Tecla F8 en Debugger', type: 'multiple-choice', question: '¿Qué hace la tecla F8 en el debugger?', options: ['Step Into', 'Step Over', 'Continue (continúa hasta el siguiente breakpoint)', 'Termina el programa'], correct: 2, explanation: 'F8 continúa la ejecución normal hasta encontrar el siguiente breakpoint.' },
                            { title: 'Watchpoints', type: 'multiple-choice', question: '¿Para qué se usan los Watchpoints en debugging?', options: ['Para medir el tiempo de ejecución', 'Para monitorear cambios en variables específicas', 'Para ver el call stack', 'Para analizar memoria'], correct: 1, explanation: 'Los Watchpoints detienen la ejecución cuando una variable específica cambia de valor.' },
                            { title: 'Breakpoints Condicionales', type: 'fill-blank', question: 'Los breakpoints condicionales se ejecutan solo cuando se cumple una ______:', placeholder: 'Qué se debe cumplir...', correct: 'condicion', explanation: 'Los breakpoints condicionales solo se activan cuando se cumple la condición especificada.' }
                        ]
                    },
                        'estructuras-control': {
                            title: 'Estructuras de Control',
                            description: 'IF, CASE, WHILE, bucles y condiciones',
                            icon: '🔄',
                            color: 'bg-purple-50'
                        },
                        'tablas-internas': {
                            title: 'Tablas Internas',
                            description: 'Declaración, manipulación y procesamiento',
                            icon: '📊',
                            color: 'bg-indigo-50'
                        }
                    },
                    intermediate: {
                        'abap-oo': {
                            title: 'ABAP Orientado a Objetos',
                            description: 'Clases, objetos, herencia e interfaces',
                            icon: '🏗️',
                            color: 'bg-emerald-50'
                        },
                        'field-symbols': {
                            title: 'Field Symbols',
                            description: 'Punteros, asignaciones dinámicas y performance',
                            icon: '🎯',
                            color: 'bg-orange-50'
                        },
                        'modularizacion': {
                            title: 'Modularización',
                            description: 'Funciones, métodos y reutilización de código',
                            icon: '🧩',
                            color: 'bg-cyan-50'
                        },
                        'debugging': {
                            title: 'Debugging ABAP',
                            description: 'Técnicas de depuración y resolución de problemas',
                            icon: '🐛',
                            color: 'bg-red-50'
                        }
                    },
                    advanced: {
                        'patrones-diseno': {
                            title: 'Patrones de Diseño',
                            description: 'Factory, Singleton, Observer y más',
                            icon: '⚙️',
                            color: 'bg-rose-50'
                        },
                        'performance': {
                            title: 'Optimización Performance',
                            description: 'SQL eficiente, índices y mejores prácticas',
                            icon: '⚡',
                            color: 'bg-yellow-50'
                        }
                    }
                },
                schemas: {
                    beginner: {
                        'conceptos-basicos': {
                            title: 'Conceptos Básicos',
                            description: 'Qué son los esquemas, tipos y estructura',
                            icon: '📋',
                            color: 'bg-green-50'
                        },
                        'configuracion': {
                            title: 'Configuración Básica',
                            description: 'Creación y asignación de esquemas',
                            icon: '⚙️',
                            color: 'bg-teal-50'
                        }
                    },
                    intermediate: {
                        'esquemas-avanzados': {
                            title: 'Esquemas Avanzados',
                            description: 'Validaciones, sustituciones y debugging',
                            icon: '🔧',
                            color: 'bg-lime-50'
                        }
                    },
                    advanced: {
                        'optimizacion': {
                            title: 'Optimización',
                            description: 'Performance, mejores prácticas y troubleshooting',
                            icon: '🚀',
                            color: 'bg-emerald-50'
                        }
                    }
                },
                pcc: {
                    beginner: {
                        'conceptos-pcc': {
                            title: 'Conceptos Básicos PCC',
                            description: 'Introducción al Payroll Control Center',
                            icon: '📊',
                            color: 'bg-purple-50'
                        },
                        'configuracion-pcc': {
                            title: 'Configuración PCC',
                            description: 'Setup inicial y configuración básica',
                            icon: '⚙️',
                            color: 'bg-indigo-50'
                        },
                        'monitoreo-pcc': {
                            title: 'Monitoreo y Control',
                            description: 'Supervisión de procesos de nómina',
                            icon: '📈',
                            color: 'bg-pink-50'
                        }
                    }
                }
            };

            // TODAS LAS LECCIONES COMPLETAS
            const createLessons = () => {
                const lessons = {};
                
                // ABAP PRINCIPIANTE - TODAS LAS LECCIONES
                lessons.abap = {
                    beginner: {
                        'fundamentos': [
                            { title: 'Tipos de Datos Básicos', type: 'multiple-choice', question: '¿Cuál es el tipo de dato correcto para almacenar un número entero en ABAP?', options: ['STRING', 'I', 'P', 'C'], correct: 1, explanation: 'El tipo "I" (Integer) se usa para números enteros en ABAP.' },
                            { title: 'Declaración de Variables', type: 'fill-blank', question: 'Completa la declaración de una variable de texto en ABAP:', code: 'DATA: lv_nombre TYPE ______(50).', placeholder: 'Escribe el tipo de dato...', correct: 'string', explanation: 'STRING es el tipo para texto variable, C(50) sería para texto fijo de 50 caracteres.' },
                            { title: 'Tipo de Dato Decimal', type: 'multiple-choice', question: '¿Cuál es el tipo de dato más apropiado para almacenar importes monetarios?', options: ['I', 'F', 'P', 'STRING'], correct: 2, explanation: 'El tipo "P" (Packed) es ideal para números decimales y cálculos monetarios.' },
                            { title: 'Longitud de Campos', type: 'fill-blank', question: 'Declara un campo de tipo caracter con longitud 10:', code: 'DATA: lv_codigo TYPE C LENGTH ______.', placeholder: 'Número...', correct: '10', explanation: 'LENGTH especifica la longitud del campo de tipo caracter.' },
                            { title: 'Constantes', type: 'multiple-choice', question: '¿Cuál es la forma correcta de declarar una constante en ABAP?', options: ["DATA: lc_max TYPE i VALUE 100", "CONSTANTS: lc_max TYPE i VALUE 100", "CONST: lc_max TYPE i VALUE 100", "STATIC: lc_max TYPE i VALUE 100"], correct: 1, explanation: 'CONSTANTS es la palabra clave para declarar constantes en ABAP.' },
                            { title: 'Asignación de Variables', type: 'multiple-choice', question: '¿Cuál es la forma correcta de asignar un valor a una variable en ABAP?', options: ['lv_variable := valor', 'lv_variable = valor', 'SET lv_variable = valor', 'lv_variable == valor'], correct: 1, explanation: 'En ABAP se usa el signo igual (=) para asignación de valores.' },
                            { title: 'Operadores Aritméticos', type: 'fill-blank', question: 'Completa la operación para calcular el resto de una división:', code: 'lv_resultado = lv_numero ______ 3.', placeholder: 'Operador...', correct: 'mod', explanation: 'MOD es el operador para calcular el resto de una división.' },
                            { title: 'Instrucción WRITE', type: 'fill-blank', question: 'Completa la instrucción para mostrar texto:', code: '______: \'Hola Mundo\'.', placeholder: 'Instrucción...', correct: 'write', explanation: 'WRITE es la instrucción básica para mostrar texto en ABAP.' },
                            { title: 'Conversión de Tipos', type: 'multiple-choice', question: '¿Qué función usarías para convertir un número a string?', options: ['CONVERT', 'CAST', 'MOVE', 'Asignación directa'], correct: 3, explanation: 'En ABAP la conversión de tipos se hace automáticamente con asignación directa.' },
                            { title: 'Comentarios en ABAP', type: 'multiple-choice', question: '¿Cuál es la forma correcta de escribir un comentario en ABAP?', options: ['// Este es un comentario', '/* Este es un comentario */', '" Este es un comentario', '# Este es un comentario'], correct: 2, explanation: 'En ABAP se usa el símbolo " (comillas dobles) para comentarios.' }
                        ],
                        'estructuras-control': [
                            { title: 'Estructura IF-ENDIF', type: 'fill-blank', question: 'Completa la estructura condicional:', code: 'IF lv_edad > 18.\n  WRITE: \'Mayor de edad\'.\n______.', placeholder: 'Escribe la palabra clave...', correct: 'endif', explanation: 'ENDIF cierra la estructura IF en ABAP.' },
                            { title: 'Operadores Lógicos', type: 'multiple-choice', question: '¿Cuál es el operador lógico AND en ABAP?', options: ['&&', 'AND', '&', 'Y'], correct: 1, explanation: 'En ABAP se usa la palabra "AND" para el operador lógico Y.' },
                            { title: 'Operador OR', type: 'multiple-choice', question: '¿Cuál es el operador lógico OR en ABAP?', options: ['||', 'OR', '|', 'O'], correct: 1, explanation: 'En ABAP se usa la palabra "OR" para el operador lógico O.' },
                            { title: 'Operador NOT', type: 'fill-blank', question: 'Completa la condición negativa:', code: 'IF ______ lv_activo = \'X\'.\n  WRITE: \'Usuario inactivo\'.\nENDIF.', placeholder: 'Operador...', correct: 'not', explanation: 'NOT es el operador de negación en ABAP.' },
                            { title: 'Estructura CASE-WHEN', type: 'multiple-choice', question: '¿Cuál es la estructura correcta para múltiples condiciones?', options: ['SWITCH-CASE-ENDSWITCH', 'CASE-WHEN-ENDCASE', 'SELECT-CASE-ENDSELECT', 'MATCH-CASE-ENDMATCH'], correct: 1, explanation: 'CASE-WHEN-ENDCASE es la estructura para múltiples condiciones en ABAP.' },
                            { title: 'CASE con OTHERS', type: 'fill-blank', question: 'Completa la estructura CASE para casos no contemplados:', code: 'CASE lv_estado.\n  WHEN \'A\'.\n    WRITE: \'Activo\'.\n  WHEN ______.\n    WRITE: \'Estado desconocido\'.\nENDCASE.', placeholder: 'Palabra clave...', correct: 'others', explanation: 'OTHERS maneja todos los casos no contemplados en CASE.' },
                            { title: 'Bucle WHILE', type: 'multiple-choice', question: '¿Cuál es la sintaxis correcta para un bucle WHILE?', options: ['WHILE condición DO...ENDWHILE', 'WHILE condición...ENDWHILE', 'DO WHILE condición...ENDDO', 'REPEAT...UNTIL condición'], correct: 1, explanation: 'En ABAP se usa WHILE condición...ENDWHILE.' },
                            { title: 'Bucle DO', type: 'fill-blank', question: 'Completa el bucle DO con número fijo de iteraciones:', code: 'DO 10 ______.\n  WRITE: sy-index.\nENDDO.', placeholder: 'Palabra clave...', correct: 'times', explanation: 'DO n TIMES...ENDDO ejecuta el bucle n veces.' },
                            { title: 'Variable del Sistema SY-INDEX', type: 'multiple-choice', question: '¿Qué contiene la variable SY-INDEX en un bucle DO?', options: ['El número total de iteraciones', 'El número de la iteración actual', 'El valor de la condición', 'El tiempo transcurrido'], correct: 1, explanation: 'SY-INDEX contiene el número de la iteración actual en bucles DO.' },
                            { title: 'Instrucción EXIT', type: 'multiple-choice', question: '¿Qué hace la instrucción EXIT en un bucle?', options: ['Termina el programa', 'Sale del bucle actual', 'Reinicia el bucle', 'Pausa el bucle'], correct: 1, explanation: 'EXIT termina inmediatamente el bucle actual.' },
                            { title: 'Instrucción CONTINUE', type: 'multiple-choice', question: '¿Qué hace la instrucción CONTINUE en un bucle?', options: ['Termina el bucle', 'Salta a la siguiente iteración', 'Reinicia el bucle desde el principio', 'Pausa el bucle'], correct: 1, explanation: 'CONTINUE salta el resto de la iteración actual y continúa con la siguiente.' }
                        ],
                        'tablas-internas': [
                            { title: 'Declaración de Tabla Interna', type: 'fill-blank', question: 'Declara una tabla interna de tipo estándar:', code: 'DATA: lt_empleados TYPE ______ TABLE OF ty_empleado.', placeholder: 'Tipo de tabla...', correct: 'standard', explanation: 'STANDARD TABLE es el tipo más común de tabla interna en ABAP.' },
                            { title: 'Tipos de Tablas Internas', type: 'multiple-choice', question: '¿Cuáles son los tres tipos principales de tablas internas?', options: ['STANDARD, SORTED, HASHED', 'INTERNAL, EXTERNAL, TEMPORARY', 'SIMPLE, COMPLEX, NESTED', 'LOCAL, GLOBAL, SHARED'], correct: 0, explanation: 'Los tres tipos son: STANDARD (acceso por índice), SORTED (ordenada) y HASHED (acceso por clave).' },
                            { title: 'Declaración con LIKE', type: 'fill-blank', question: 'Declara una tabla interna basada en otra tabla:', code: 'DATA: lt_nueva ______ TABLE OF lt_existente.', placeholder: 'Palabra clave...', correct: 'like', explanation: 'LIKE TABLE OF crea una tabla con la misma estructura que otra existente.' },
                            { title: 'Work Area', type: 'multiple-choice', question: '¿Para qué se usa una Work Area con tablas internas?', options: ['Para ordenar la tabla', 'Para procesar registros individuales', 'Para crear copias de la tabla', 'Para borrar la tabla'], correct: 1, explanation: 'La Work Area se usa para procesar registros individuales de la tabla interna.' },
                            { title: 'Declaración de Work Area', type: 'fill-blank', question: 'Declara una work area para la tabla:', code: 'DATA: ls_empleado ______ LINE OF lt_empleados.', placeholder: 'Palabra clave...', correct: 'like', explanation: 'LIKE LINE OF crea una work area con la estructura de una línea de la tabla.' },
                            { title: 'Comando APPEND', type: 'multiple-choice', question: '¿Qué hace el comando APPEND en una tabla interna?', options: ['Borra el último registro', 'Añade un registro al final', 'Ordena la tabla', 'Cuenta los registros'], correct: 1, explanation: 'APPEND añade un nuevo registro al final de la tabla interna.' },
                            { title: 'Sintaxis APPEND', type: 'fill-blank', question: 'Completa el comando para añadir un registro:', code: 'ls_empleado-nombre = \'Juan\'.\n______ ls_empleado TO lt_empleados.', placeholder: 'Comando...', correct: 'append', explanation: 'APPEND work_area TO tabla añade el contenido de la work area a la tabla.' },
                            { title: 'Loop en Tablas', type: 'multiple-choice', question: '¿Cuál es la sintaxis correcta para recorrer una tabla interna?', options: ['LOOP AT lt_tabla INTO ls_linea', 'FOR EACH ls_linea IN lt_tabla', 'WHILE ls_linea = NEXT(lt_tabla)', 'ITERATE lt_tabla INTO ls_linea'], correct: 0, explanation: 'LOOP AT tabla INTO estructura es la sintaxis estándar en ABAP.' },
                            { title: 'Variable SY-TABIX', type: 'multiple-choice', question: '¿Qué contiene SY-TABIX en un LOOP AT?', options: ['El total de registros', 'El índice del registro actual', 'El valor del registro', 'El tipo de tabla'], correct: 1, explanation: 'SY-TABIX contiene el índice del registro actual en el loop.' },
                            { title: 'Comando READ TABLE', type: 'fill-blank', question: 'Completa el comando para leer un registro específico:', code: '______ TABLE lt_empleados INTO ls_empleado INDEX 1.', placeholder: 'Comando...', correct: 'read', explanation: 'READ TABLE permite leer un registro específico de la tabla interna.' },
                            { title: 'Verificación después de READ', type: 'multiple-choice', question: '¿Qué variable del sistema verificas después de READ TABLE?', options: ['SY-TABIX', 'SY-SUBRC', 'SY-INDEX', 'SY-UNAME'], correct: 1, explanation: 'SY-SUBRC = 0 indica que READ TABLE encontró el registro buscado.' },
                            { title: 'Comando MODIFY', type: 'multiple-choice', question: '¿Qué hace el comando MODIFY en una tabla interna?', options: ['Borra un registro', 'Añade un registro', 'Actualiza un registro existente', 'Cuenta los registros'], correct: 2, explanation: 'MODIFY actualiza un registro existente en la tabla interna.' },
                            { title: 'Comando DELETE', type: 'fill-blank', question: 'Completa el comando para borrar el registro actual en un loop:', code: 'LOOP AT lt_tabla INTO ls_linea.\n  IF ls_linea-activo = \' \'.\n    ______ lt_tabla.\n  ENDIF.\nENDLOOP.', placeholder: 'Comando...', correct: 'delete', explanation: 'DELETE tabla (sin índice) borra el registro actual dentro de un loop.' },
                            { title: 'Comando CLEAR', type: 'multiple-choice', question: '¿Cuál es la diferencia entre CLEAR y REFRESH?', options: ['Son sinónimos', 'CLEAR vacía work area, REFRESH vacía tabla', 'CLEAR es más rápido', 'REFRESH es obsoleto'], correct: 1, explanation: 'CLEAR vacía el contenido de una work area, REFRESH vacía completamente una tabla interna.' },
                            { title: 'Función LINES', type: 'fill-blank', question: 'Completa para obtener el número de registros:', code: 'lv_contador = ______ ( lt_empleados ).', placeholder: 'Función...', correct: 'lines', explanation: 'LINES() devuelve el número de registros de una tabla interna.' }
                        ]
                    },
                    // ABAP INTERMEDIO
                    intermediate: {
                        'abap-oo': [
                            { title: 'Definición de Clase', type: 'fill-blank', question: 'Completa la definición de una clase:', code: '______ lcl_empleado DEFINITION.\n  PUBLIC SECTION.\n    DATA: mv_nombre TYPE string.\nENDCLASS.', placeholder: 'Palabra clave...', correct: 'class', explanation: 'Las clases se definen con CLASS...ENDCLASS en ABAP.' },
                            { title: 'Secciones de Visibilidad', type: 'multiple-choice', question: '¿En qué sección declararías un método que solo debe ser accesible desde subclases?', options: ['PUBLIC SECTION', 'PRIVATE SECTION', 'PROTECTED SECTION', 'FRIEND SECTION'], correct: 2, explanation: 'PROTECTED SECTION es accesible desde la misma clase y sus subclases.' },
                            { title: 'Atributos de Clase', type: 'multiple-choice', question: '¿Cuál es la diferencia entre atributos de instancia y de clase?', options: ['No hay diferencia', 'Instancia: cada objeto tiene su copia, Clase: compartido por todos', 'Instancia es más rápido', 'Clase es obsoleto'], correct: 1, explanation: 'Atributos de instancia: cada objeto tiene su propia copia. Atributos de clase: compartidos por todas las instancias.' },
                            { title: 'Constructor de Clase', type: 'multiple-choice', question: '¿Cuál es el nombre del método constructor en ABAP OO?', options: ['constructor', 'new', 'init', 'create'], correct: 0, explanation: 'El método constructor se llama "constructor" en ABAP OO.' },
                            { title: 'Instanciación Moderna', type: 'multiple-choice', question: '¿Cuál es la forma moderna de crear una instancia de objeto?', options: ['CREATE OBJECT lo_emp', 'lo_emp = NEW lcl_empleado( )', 'INSTANTIATE lo_emp TYPE lcl_empleado', 'lo_emp = lcl_empleado=>new( )'], correct: 1, explanation: 'NEW es la forma moderna de instanciar objetos en ABAP 7.4+.' }
                        ],
                        'field-symbols': [
                            { title: 'Declaración de Field Symbol', type: 'fill-blank', question: 'Declara un field symbol:', code: '______-SYMBOLS: <fs_empleado> TYPE ty_empleado.', placeholder: 'Palabra clave...', correct: 'field', explanation: 'FIELD-SYMBOLS declara un field symbol que actúa como puntero.' },
                            { title: 'Asignación de Field Symbol', type: 'fill-blank', question: 'Asigna una variable al field symbol:', code: '______ <fs_empleado> TO ls_empleado.', placeholder: 'Comando...', correct: 'assign', explanation: 'ASSIGN vincula un field symbol a una variable o área de memoria.' },
                            { title: 'Verificación de Asignación', type: 'multiple-choice', question: '¿Cómo verificas si un field symbol está asignado?', options: ['IF <fs_data> IS ASSIGNED', 'IF <fs_data> IS NOT INITIAL', 'IF <fs_data> IS BOUND', 'IF <fs_data> IS ACTIVE'], correct: 0, explanation: 'IS ASSIGNED verifica si un field symbol está apuntando a algún dato.' },
                            { title: 'Ventajas de Field Symbols', type: 'multiple-choice', question: '¿Cuál es la principal ventaja de usar field symbols?', options: ['Ocupan menos memoria', 'Son más seguros', 'Mejoran el rendimiento al evitar copias de datos', 'Son más fáciles de usar'], correct: 2, explanation: 'Los field symbols apuntan directamente a la memoria, evitando copias costosas de datos.' },
                            { title: 'Field Symbol en Loop', type: 'fill-blank', question: 'Usa field symbol en un loop para mejor rendimiento:', code: 'LOOP AT lt_empleados ______ <fs_empleado>.\n  <fs_empleado>-salario = <fs_empleado>-salario * \'1.1\'.\nENDLOOP.', placeholder: 'Palabra clave...', correct: 'assigning', explanation: 'ASSIGNING permite modificar directamente los registros de la tabla sin copiar datos.' }
                        ],
                        'modularizacion': [
                            { title: 'Módulos de Función', type: 'multiple-choice', question: '¿Cuál es la principal ventaja de los módulos de función?', options: ['Son más rápidos', 'Permiten reutilización de código', 'Ocupan menos memoria', 'Son más seguros'], correct: 1, explanation: 'Los módulos de función permiten reutilizar código y centralizar lógica común.' },
                            { title: 'Llamada a Función', type: 'fill-blank', question: 'Completa la llamada a un módulo de función:', code: '______ FUNCTION \'Z_CALCULAR_IMPUESTO\'\n  EXPORTING\n    iv_importe = lv_importe\n  IMPORTING\n    ev_impuesto = lv_impuesto.', placeholder: 'Comando...', correct: 'call', explanation: 'CALL FUNCTION es el comando para ejecutar un módulo de función.' },
                            { title: 'Verificación de Función', type: 'multiple-choice', question: '¿Qué debes verificar después de llamar a una función?', options: ['SY-TABIX', 'SY-SUBRC', 'SY-INDEX', 'SY-UNAME'], correct: 1, explanation: 'SY-SUBRC indica si la función se ejecutó correctamente (0) o hubo error.' }
                        ],
                        'debugging': [
                            { title: 'Activación del Debugger', type: 'multiple-choice', question: '¿Cuál es la forma más común de activar el debugger en ABAP?', options: ['F8', '/H en el campo de comandos', 'Ctrl+D', 'Alt+F12'], correct: 1, explanation: 'Escribir /H en el campo de comandos SAP activa el debugger para la siguiente acción.' },
                            { title: 'Navegación F5', type: 'multiple-choice', question: '¿Qué hace la tecla F5 en el debugger?', options: ['Ejecuta hasta el siguiente breakpoint', 'Ejecuta paso a paso (Step Into)', 'Sale del debugger', 'Ejecuta la línea actual sin entrar en subcódigo'], correct: 1, explanation: 'F5 ejecuta paso a paso entrando en funciones, métodos y subrutinas (Step Into).' },
                            { title: 'Navegación F6', type: 'multiple-choice', question: '¿Qué hace la tecla F6 en el debugger?', options: ['Step Into (entra en subcódigo)', 'Step Over (ejecuta sin entrar en subcódigo)', 'Continue (continúa ejecución)', 'Step Return (sale de la función actual)'], correct: 1, explanation: 'F6 ejecuta la línea actual sin entrar en funciones o métodos (Step Over).' },
                            { title: 'Navegación F8', type: 'multiple-choice', question: '¿Qué hace la tecla F8 en el debugger?', options: ['Step Into', 'Step Over', 'Continue (continúa hasta el siguiente breakpoint)', 'Termina el programa'], correct: 2, explanation: 'F8 continúa la ejecución normal hasta encontrar el siguiente breakpoint.' },
                            { title: 'Breakpoints', type: 'fill-blank', question: 'Completa el comando para insertar un breakpoint dinámico en el código:', code: 'DATA: lv_valor TYPE i.\nlv_valor = 10.\n______-POINT.\nWRITE: lv_valor.', placeholder: 'Comando...', correct: 'break', explanation: 'BREAK-POINT inserta un breakpoint hard-coded que siempre detiene la ejecución.' }
                        ]
                    },
                    // ABAP AVANZADO
                    advanced: {
                        'patrones-diseno': [
                            { title: 'Factory Pattern', type: 'multiple-choice', question: '¿Cuál es el beneficio principal del patrón Factory?', options: ['Mejora el rendimiento', 'Centraliza la creación de objetos', 'Reduce el uso de memoria', 'Simplifica la herencia'], correct: 1, explanation: 'El patrón Factory centraliza y controla la creación de objetos.' },
                            { title: 'Singleton Pattern', type: 'fill-blank', question: 'Implementa el patrón Singleton:', code: 'CLASS-DATA: go_instance TYPE REF TO lcl_singleton.\nMETHOD get_instance.\n  IF go_instance IS ______.\n    go_instance = NEW #( ).\n  ENDIF.\nENDMETHOD.', placeholder: 'Condición...', correct: 'initial', explanation: 'Se verifica si la instancia IS INITIAL antes de crearla por primera vez.' }
                        ],
                        'performance': [
                            { title: 'Optimización SQL', type: 'multiple-choice', question: '¿Cuál es la mejor práctica para consultas SQL en ABAP?', options: ['Usar SELECT *', 'Usar SELECT con campos específicos', 'Usar múltiples SELECT individuales', 'Evitar WHERE clause'], correct: 1, explanation: 'SELECT con campos específicos reduce transferencia de datos y mejora rendimiento.' },
                            { title: 'Índices de Base de Datos', type: 'fill-blank', question: 'Los índices mejoran el rendimiento de consultas con cláusula ______:', placeholder: 'Cláusula SQL...', correct: 'where', explanation: 'Los índices aceleran las consultas que usan WHERE para filtrar datos.' }
                        ]
                    }
                };

                // ESQUEMAS SAP
                lessons.schemas = {
                    beginner: {
                        'conceptos-basicos': [
                            { title: '¿Qué es un Esquema SAP?', type: 'multiple-choice', question: '¿Cuál es la definición correcta de un esquema en SAP?', options: ['Una tabla de base de datos', 'Un conjunto de reglas y cálculos que se ejecutan automáticamente', 'Un reporte de datos', 'Una transacción específica'], correct: 1, explanation: 'Un esquema SAP es un conjunto de reglas, cálculos y validaciones que se ejecutan automáticamente en procesos específicos.' },
                            { title: 'Tipos de Esquemas', type: 'multiple-choice', question: '¿Cuáles son los tres tipos principales de esquemas en SAP?', options: ['Cálculo, Validación y Sustitución', 'Entrada, Proceso y Salida', 'Maestro, Transaccional y Histórico', 'Activo, Pasivo y Neutral'], correct: 0, explanation: 'Los tres tipos principales son: Esquemas de Cálculo, Esquemas de Validación y Esquemas de Sustitución.' },
                            { title: 'Estructura de un Esquema', type: 'fill-blank', question: 'Un esquema SAP está compuesto por una secuencia de ______:', placeholder: 'Completa la palabra...', correct: 'pasos', explanation: 'Los esquemas están compuestos por una secuencia de pasos que se ejecutan en orden.' },
                            { title: 'Pasos en un Esquema', type: 'multiple-choice', question: '¿Qué elementos principales contiene un paso de esquema?', options: ['Solo una condición', 'Solo una cuenta', 'Condición, Cuenta y Asignación', 'Solo una asignación'], correct: 2, explanation: 'Cada paso contiene: Condición (cuándo se ejecuta), Cuenta (qué cuenta afecta) y Asignación (cómo se calcula).' },
                            { title: 'Condiciones en Esquemas', type: 'multiple-choice', question: 'Las condiciones en los esquemas se evalúan como:', options: ['Verdadero o Falso', 'Números enteros', 'Texto descriptivo', 'Fechas'], correct: 0, explanation: 'Las condiciones se evalúan como Verdadero (TRUE) o Falso (FALSE) para determinar si el paso se ejecuta.' }
                        ],
                        'configuracion': [
                            { title: 'Creación de Esquemas', type: 'multiple-choice', question: '¿En qué herramienta se crean los esquemas SAP?', options: ['SE80', 'SPRO (IMG)', 'SE11', 'SM30'], correct: 1, explanation: 'Los esquemas se crean y configuran en SPRO (Implementation Guide).' },
                            { title: 'Naming Convention', type: 'fill-blank', question: 'Los esquemas personalizados deben comenzar con ______ o ______:', placeholder: 'Prefijos...', correct: 'z', explanation: 'Los esquemas personalizados deben comenzar con Z o Y para distinguirlos de los estándar.' },
                            { title: 'Copia de Esquemas', type: 'multiple-choice', question: '¿Cuál es la mejor práctica al crear esquemas personalizados?', options: ['Crear desde cero', 'Copiar un esquema estándar y modificarlo', 'Usar solo esquemas SAP', 'Evitar usar esquemas'], correct: 1, explanation: 'Es mejor copiar un esquema estándar similar y modificarlo según necesidades.' },
                            { title: 'Transporte de Esquemas', type: 'multiple-choice', question: '¿Cómo se transportan los esquemas entre sistemas?', options: ['Manualmente', 'Mediante órdenes de transporte', 'Por email', 'No se pueden transportar'], correct: 1, explanation: 'Los esquemas se transportan mediante órdenes de transporte como otras configuraciones.' },
                            { title: 'Pruebas de Esquemas', type: 'fill-blank', question: 'Antes de activar un esquema en producción, se debe probar en ______:', placeholder: 'Tipo de sistema...', correct: 'desarrollo', explanation: 'Los esquemas deben probarse exhaustivamente en desarrollo antes de pasar a producción.' }
                        ]
                    },
                    intermediate: {
                        'esquemas-avanzados': [
                            { title: 'Configuración de Esquemas', type: 'multiple-choice', question: '¿En qué transacción se configuran los esquemas de contabilización automática?', options: ['OB41', 'OBX1', 'OBYC', 'OBA1'], correct: 0, explanation: 'OB41 es la transacción para configurar esquemas de contabilización automática en SAP.' },
                            { title: 'Asignación de Esquemas', type: 'fill-blank', question: 'Los esquemas se asignan a ______ específicas:', code: 'Sociedad: 1000\nEsquema: RMCL00', placeholder: 'Elemento de configuración...', correct: 'sociedades', explanation: 'Los esquemas se asignan a sociedades específicas según sus requerimientos.' },
                            { title: 'Debugging de Esquemas', type: 'multiple-choice', question: '¿Qué herramienta se usa para hacer debug de esquemas SAP?', options: ['SE80', 'SE11', 'Depurador ABAP', 'ST05'], correct: 2, explanation: 'El depurador ABAP permite hacer debug de esquemas para ver el flujo de ejecución paso a paso.' },
                            { title: 'Validación de Esquemas', type: 'multiple-choice', question: '¿Cuándo se ejecutan los esquemas de validación?', options: ['Solo al crear documentos', 'Solo al modificar documentos', 'Al crear y modificar documentos', 'Solo al consultar documentos'], correct: 2, explanation: 'Los esquemas de validación se ejecutan tanto al crear como al modificar documentos contables.' },
                            { title: 'Mensajes en Esquemas', type: 'multiple-choice', question: '¿Qué tipos de mensajes pueden generar los esquemas de validación?', options: ['Solo errores (E)', 'Solo warnings (W)', 'Errores (E), Warnings (W) e Informativos (I)', 'Solo informativos (I)'], correct: 2, explanation: 'Los esquemas pueden generar mensajes de error (E), warning (W) e informativos (I) según la situación.' }
                        ]
                    },
                    advanced: {
                        'optimizacion': [
                            { title: 'Esquemas Complejos', type: 'multiple-choice', question: '¿Cuál es la mejor práctica para esquemas con muchos pasos?', options: ['Usar un solo esquema grande', 'Dividir en múltiples esquemas más pequeños', 'Evitar usar esquemas', 'Usar solo validaciones manuales'], correct: 1, explanation: 'Es mejor dividir esquemas complejos en múltiples esquemas más pequeños y manejables.' },
                            { title: 'Optimización de Performance', type: 'fill-blank', question: 'Para mejorar el rendimiento, las condiciones más ______ deben ir primero:', placeholder: 'Tipo de condición...', correct: 'restrictivas', explanation: 'Las condiciones más restrictivas deben ir primero para filtrar rápidamente y evitar procesamiento innecesario.' },
                            { title: 'Gestión de Errores', type: 'multiple-choice', question: '¿Qué sucede cuando un esquema encuentra un error durante la ejecución?', options: ['Continúa con el siguiente paso', 'Se detiene y revierte toda la transacción', 'Solo revierte el paso actual', 'Genera un warning y continúa'], correct: 1, explanation: 'Los errores en esquemas detienen la ejecución y revierten toda la transacción para mantener la integridad.' }
                        ]
                    }
                };

                // PCC
                lessons.pcc = {
                    beginner: {
                        'conceptos-pcc': [
                            { title: '¿Qué es PCC?', type: 'multiple-choice', question: '¿Qué significa PCC en SAP HCM?', options: ['Personal Control Center', 'Payroll Control Center', 'Process Control Center', 'Personnel Configuration Center'], correct: 1, explanation: 'PCC significa Payroll Control Center, el centro de control de nómina en SAP HCM.' },
                            { title: 'Propósito del PCC', type: 'multiple-choice', question: '¿Cuál es el propósito principal del PCC?', options: ['Calcular salarios manualmente', 'Supervisar y controlar los procesos de nómina de forma centralizada', 'Crear reportes de RRHH', 'Gestionar vacaciones'], correct: 1, explanation: 'El PCC permite supervisar y controlar todos los procesos de nómina desde un punto centralizado.' },
                            { title: 'Componentes del PCC', type: 'fill-blank', question: 'El PCC incluye herramientas para monitoreo, control, ______ y análisis:', placeholder: 'Función principal...', correct: 'simulacion', explanation: 'El PCC incluye herramientas de monitoreo, control, simulación y análisis de procesos de nómina.' },
                            { title: 'Usuarios del PCC', type: 'multiple-choice', question: '¿Quiénes son los usuarios típicos del PCC?', options: ['Solo empleados', 'Solo gerentes de RRHH', 'Administradores de nómina, supervisores y analistas de RRHH', 'Solo el departamento de TI'], correct: 2, explanation: 'El PCC es usado por administradores de nómina, supervisores y analistas de RRHH para gestionar procesos.' },
                            { title: 'Integración con SAP HCM', type: 'multiple-choice', question: '¿Cómo se integra PCC con otros módulos de SAP HCM?', options: ['Funciona de forma independiente', 'Se integra completamente con PA, OM, PT y otros módulos', 'Solo se conecta con PA', 'Requiere interfaces especiales'], correct: 1, explanation: 'PCC se integra completamente con Personnel Administration (PA), Organizational Management (OM), Personnel Time (PT) y otros módulos HCM.' },
                            { title: 'Ventajas del PCC', type: 'fill-blank', question: 'Una ventaja clave del PCC es la ______ en tiempo real de procesos de nómina:', placeholder: 'Capacidad principal...', correct: 'visibilidad', explanation: 'PCC proporciona visibilidad en tiempo real del estado y progreso de todos los procesos de nómina.' },
                            { title: 'Procesos que Gestiona PCC', type: 'multiple-choice', question: '¿Qué procesos puede gestionar el PCC?', options: ['Solo cálculo de nómina regular', 'Solo nóminas extraordinarias', 'Nóminas regulares, extraordinarias, ajustes y simulaciones', 'Solo reportes de nómina'], correct: 2, explanation: 'PCC puede gestionar nóminas regulares, extraordinarias, ajustes, simulaciones y otros procesos relacionados.' },
                            { title: 'Dashboard del PCC', type: 'multiple-choice', question: '¿Qué información muestra típicamente el dashboard del PCC?', options: ['Solo errores de nómina', 'Estado de procesos, estadísticas, alertas y KPIs de nómina', 'Solo datos de empleados', 'Solo información financiera'], correct: 1, explanation: 'El dashboard del PCC muestra estado de procesos, estadísticas, alertas y KPIs relacionados con la nómina.' },
                            { title: 'Automatización en PCC', type: 'fill-blank', question: 'PCC permite la ______ de muchos procesos de nómina para reducir intervención manual:', placeholder: 'Proceso de mejora...', correct: 'automatizacion', explanation: 'La automatización en PCC reduce la necesidad de intervención manual en procesos rutinarios de nómina.' },
                            { title: 'Seguridad en PCC', type: 'multiple-choice', question: '¿Cómo maneja PCC la seguridad y autorizaciones?', options: ['No tiene controles de seguridad', 'Usa el sistema de autorizaciones estándar de SAP', 'Requiere un sistema de seguridad separado', 'Solo permite acceso a administradores'], correct: 1, explanation: 'PCC utiliza el sistema de autorizaciones estándar de SAP para controlar el acceso a funciones y datos.' }
                        ],
                        'configuracion-pcc': [
                            { title: 'Configuración Inicial', type: 'multiple-choice', question: '¿Qué es lo primero que se debe configurar en PCC?', options: ['Los empleados', 'Los esquemas de nómina y parámetros del sistema', 'Los reportes', 'Las autorizaciones'], correct: 1, explanation: 'La configuración inicial requiere definir esquemas de nómina y parámetros básicos del sistema.' },
                            { title: 'Variantes de Nómina', type: 'fill-blank', question: 'En PCC se configuran ______ de nómina para diferentes tipos de empleados:', placeholder: 'Configuraciones específicas...', correct: 'variantes', explanation: 'Las variantes de nómina permiten configuraciones específicas para diferentes grupos de empleados.' },
                            { title: 'Períodos de Nómina', type: 'multiple-choice', question: '¿Cómo se definen los períodos de nómina en PCC?', options: ['Solo mensualmente', 'Se configuran según las necesidades: semanal, quincenal, mensual, etc.', 'Solo anualmente', 'Automáticamente por el sistema'], correct: 1, explanation: 'Los períodos de nómina se pueden configurar según necesidades: semanal, quincenal, mensual, etc.' },
                            { title: 'Clusters de Nómina', type: 'multiple-choice', question: '¿Qué son los clusters en la configuración de PCC?', options: ['Grupos de empleados', 'Estructuras de datos que almacenan resultados de nómina', 'Tipos de reportes', 'Configuraciones de seguridad'], correct: 1, explanation: 'Los clusters son estructuras de datos especializadas que almacenan los resultados de los cálculos de nómina.' },
                            { title: 'Configuración de Alertas', type: 'fill-blank', question: 'PCC permite configurar ______ automáticas para notificar sobre errores o situaciones especiales:', placeholder: 'Sistema de notificaciones...', correct: 'alertas', explanation: 'Las alertas automáticas notifican sobre errores, excepciones o situaciones que requieren atención.' },
                            { title: 'Configuración de Workflows', type: 'multiple-choice', question: '¿Para qué se usan los workflows en PCC?', options: ['Solo para aprobaciones', 'Para automatizar procesos y rutear tareas según reglas de negocio', 'Solo para reportes', 'Para backup de datos'], correct: 1, explanation: 'Los workflows automatizan procesos y rutean tareas según reglas de negocio predefinidas.' },
                            { title: 'Parámetros de Sistema', type: 'multiple-choice', question: '¿Qué tipo de parámetros se configuran a nivel de sistema en PCC?', options: ['Solo fechas', 'Configuraciones globales como monedas, calendarios, y reglas generales', 'Solo nombres de empleados', 'Solo códigos de nómina'], correct: 1, explanation: 'Los parámetros de sistema incluyen configuraciones globales como monedas, calendarios y reglas generales.' },
                            { title: 'Configuración de Interfaces', type: 'fill-blank', question: 'PCC requiere configurar ______ con sistemas externos como bancos o entidades gubernamentales:', placeholder: 'Conexiones externas...', correct: 'interfaces', explanation: 'Las interfaces permiten intercambio de datos con sistemas externos como bancos y entidades gubernamentales.' }
                        ],
                        'monitoreo-pcc': [
                            { title: 'Monitoreo en Tiempo Real', type: 'multiple-choice', question: '¿Qué permite el monitoreo en tiempo real en PCC?', options: ['Solo ver errores pasados', 'Supervisar el progreso actual de los procesos de nómina', 'Solo generar reportes mensuales', 'Solo verificar datos de empleados'], correct: 1, explanation: 'El monitoreo en tiempo real permite supervisar el progreso actual de todos los procesos de nómina.' },
                            { title: 'Indicadores de Estado', type: 'fill-blank', question: 'PCC utiliza ______ visuales para mostrar el estado de los procesos (verde, amarillo, rojo):', placeholder: 'Sistema visual...', correct: 'indicadores', explanation: 'Los indicadores de estado usan colores (verde, amarillo, rojo) para mostrar el estado de los procesos.' },
                            { title: 'Control de Errores', type: 'multiple-choice', question: '¿Cómo maneja PCC los errores en procesos de nómina?', options: ['Los ignora automáticamente', 'Los registra, categoriza y permite su resolución sistemática', 'Solo los reporta al final del mes', 'Los corrige automáticamente'], correct: 1, explanation: 'PCC registra, categoriza errores y proporciona herramientas para su resolución sistemática.' },
                            { title: 'Reportes de Control', type: 'multiple-choice', question: '¿Qué tipos de reportes de control genera PCC?', options: ['Solo reportes financieros', 'Reportes de proceso, excepción, validación y estadísticos', 'Solo reportes de empleados', 'No genera reportes'], correct: 1, explanation: 'PCC genera diversos reportes: de proceso, excepción, validación y estadísticos para control completo.' },
                            { title: 'Simulaciones de Nómina', type: 'fill-blank', question: 'PCC permite realizar ______ antes del cálculo real para detectar problemas:', placeholder: 'Procesos de prueba...', correct: 'simulaciones', explanation: 'Las simulaciones permiten probar cálculos de nómina antes de la ejecución real para detectar problemas.' },
                            { title: 'Auditoría de Procesos', type: 'multiple-choice', question: '¿Qué información proporciona la auditoría de procesos en PCC?', options: ['Solo datos financieros', 'Rastro completo de quién, qué, cuándo y cómo se procesaron las nóminas', 'Solo errores críticos', 'Solo información de empleados'], correct: 1, explanation: 'La auditoría proporciona un rastro completo de quién, qué, cuándo y cómo se procesaron las nóminas.' },
                            { title: 'Control de Calidad', type: 'fill-blank', question: 'PCC incluye verificaciones de ______ para asegurar la precisión de los cálculos:', placeholder: 'Verificación de precisión...', correct: 'calidad', explanation: 'Las verificaciones de calidad aseguran que los cálculos de nómina sean precisos y consistentes.' }
                        ]
                    }
                };

                return lessons;
            };

            const lessons = createLessons();

            // Resto de las funciones...
            const markLessonCompleted = (module, level, subsection, lessonIndex, isCorrect) => {
                const key = `${module}-${level}-${subsection}`;
                setAppState(prev => {
                    const newCompletedLessons = { ...prev.completedLessons };
                    const newModuleProgress = { ...prev.moduleProgress };

                    if (!newCompletedLessons[key]) {
                        newCompletedLessons[key] = {};
                    }
                    newCompletedLessons[key][lessonIndex] = isCorrect;

                    if (!newModuleProgress[key]) {
                        newModuleProgress[key] = { completed: 0, total: 0, score: 0 };
                    }
                    
                    const totalLessons = lessons[module][level][subsection].length;
                    const completedCount = Object.keys(newCompletedLessons[key]).length;
                    const correctCount = Object.values(newCompletedLessons[key]).filter(Boolean).length;
                    
                    newModuleProgress[key] = {
                        completed: completedCount,
                        total: totalLessons,
                        score: correctCount
                    };

                    return {
                        ...prev,
                        completedLessons: newCompletedLessons,
                        moduleProgress: newModuleProgress
                    };
                });
            };

            const getSubsectionProgress = (module, level, subsection) => {
                const key = `${module}-${level}-${subsection}`;
                return appState.moduleProgress[key] || { completed: 0, total: 0, score: 0 };
            };

            const resetProgress = () => {
                try {
                    localStorage.removeItem('sapLearningProgress');
                    setAppState({
                        currentScreen: 'home',
                        selectedModule: null,
                        selectedLevel: null,
                        selectedSubsection: null,
                        currentLesson: 0,
                        score: 0,
                        completedLessons: {},
                        moduleProgress: {}
                    });
                } catch (e) {
                    console.error('Error resetting progress:', e);
                }
            };

            const checkAnswer = (answer) => {
                const currentLessonData = lessons[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection][appState.currentLesson];
                let correct = false;
                
                if (currentLessonData.type === 'multiple-choice') {
                    correct = answer === currentLessonData.correct;
                } else if (currentLessonData.type === 'fill-blank') {
                    const userAnswerLower = answer.toLowerCase().trim();
                    correct = userAnswerLower === currentLessonData.correct.toLowerCase();
                }

                setIsCorrect(correct);
                setShowResult(true);
                
                markLessonCompleted(appState.selectedModule, appState.selectedLevel, appState.selectedSubsection, appState.currentLesson, correct);
                
                if (correct) {
                    updateAppState({ score: appState.score + 1 });
                }
            };

            const handleMultipleChoice = (optionIndex) => {
                checkAnswer(optionIndex);
            };

            const handleFillBlank = () => {
                if (userAnswer.trim()) {
                    checkAnswer(userAnswer);
                }
            };

            const nextLesson = () => {
                setShowResult(false);
                setUserAnswer('');
                setIsCorrect(false);
                
                if (appState.currentLesson < lessons[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection].length - 1) {
                    updateAppState({ currentLesson: appState.currentLesson + 1 });
                } else {
                    updateAppState({ currentScreen: 'completed' });
                }
            };

            const resetApp = () => {
                updateAppState({
                    currentScreen: 'home',
                    selectedModule: null,
                    selectedLevel: null,
                    selectedSubsection: null,
                    currentLesson: 0,
                    score: 0
                });
            };

            // Renderizado de pantallas
            if (appState.currentScreen === 'home') {
                return React.createElement('div', { className: "min-h-screen bg-gray-50 p-4" },
                    React.createElement('div', { className: "max-w-md mx-auto" },
                        React.createElement('div', { className: "text-center mb-8 pt-8" },
                            React.createElement('div', { className: "w-16 h-16 bg-blue-600 rounded-2xl mx-auto mb-4 flex items-center justify-center" },
                                React.createElement(BookOpen, { className: "w-8 h-8 text-white" })
                            ),
                            React.createElement('h1', { className: "text-3xl font-light text-gray-900 mb-2" }, 'SAP Learning'),
                            React.createElement('p', { className: "text-gray-600" }, 'Aprende SAP de forma interactiva'),
                            React.createElement('div', { className: "mt-4 flex justify-center space-x-4" },
                                React.createElement('button', {
                                    onClick: resetProgress,
                                    className: "text-sm text-red-600 hover:text-red-800 underline"
                                }, 'Reiniciar Progreso')
                            )
                        ),
                        React.createElement('div', { className: "space-y-4" },
                            Object.entries(modules).map(([key, module]) => {
                                // Calcular progreso general del módulo
                                const moduleSubsections = Object.keys(subsections[key] || {}).flatMap(level => 
                                    Object.keys(subsections[key][level] || {}).map(subsection => `${key}-${level}-${subsection}`)
                                );
                                const moduleProgress = moduleSubsections.reduce((acc, subKey) => {
                                    const progress = appState.moduleProgress[subKey] || { completed: 0, total: 0, score: 0 };
                                    acc.completed += progress.completed;
                                    acc.total += progress.total;
                                    acc.score += progress.score;
                                    return acc;
                                }, { completed: 0, total: 0, score: 0 });
                                
                                const progressPercentage = moduleProgress.total > 0 ? Math.round((moduleProgress.completed / moduleProgress.total) * 100) : 0;
                                
                                return React.createElement('button', {
                                    key: key,
                                    onClick: () => {
                                        updateAppState({ selectedModule: key, currentScreen: 'levels' });
                                    },
                                    className: `w-full p-6 rounded-2xl border-2 ${module.color} hover:shadow-lg transition-all duration-200 text-left`
                                },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('div', { className: "flex items-center space-x-4" },
                                            React.createElement(module.icon, { className: "w-8 h-8 text-gray-700" }),
                                            React.createElement('div', null,
                                                React.createElement('h3', { className: "text-xl font-medium text-gray-900" }, module.title),
                                                React.createElement('p', { className: "text-gray-600 text-sm mt-1" }, module.description),
                                                moduleProgress.total > 0 && React.createElement('div', { className: "mt-2" },
                                                    React.createElement('div', { className: "w-32 bg-gray-200 rounded-full h-2" },
                                                        React.createElement('div', {
                                                            className: "bg-blue-600 h-2 rounded-full",
                                                            style: { width: `${progressPercentage}%` }
                                                        })
                                                    ),
                                                    React.createElement('p', { className: "text-xs text-gray-500 mt-1" },
                                                        `${progressPercentage}% completado (${moduleProgress.score}/${moduleProgress.total})`
                                                    )
                                                )
                                            )
                                        ),
                                        React.createElement(ChevronRight, { className: "w-6 h-6 text-gray-400" })
                                    )
                                );
                            })
                        )
                    )
                );
            }

            if (appState.currentScreen === 'levels') {
                return React.createElement('div', { className: "min-h-screen bg-gray-50 p-4" },
                    React.createElement('div', { className: "max-w-md mx-auto" },
                        React.createElement('div', { className: "flex items-center mb-6 pt-4" },
                            React.createElement('button', {
                                onClick: () => updateAppState({ currentScreen: 'home' }),
                                className: "p-2 hover:bg-gray-200 rounded-full transition-colors"
                            },
                                React.createElement(ChevronLeft, { className: "w-6 h-6 text-gray-600" })
                            ),
                            React.createElement('h2', { className: "text-2xl font-light text-gray-900 ml-4" },
                                `Niveles de ${modules[appState.selectedModule].title}`
                            )
                        ),
                        React.createElement('div', { className: "space-y-4" },
                            Object.entries(levels).map(([key, level]) => {
                                const subsectionCount = Object.keys(subsections[appState.selectedModule][key] || {}).length;
                                const isAvailable = subsectionCount > 0;
                                
                                return React.createElement('button', {
                                    key: key,
                                    onClick: () => {
                                        if (isAvailable) {
                                            updateAppState({ selectedLevel: key, currentScreen: 'subsections' });
                                        }
                                    },
                                    disabled: !isAvailable,
                                    className: `w-full p-6 rounded-2xl border-2 transition-all duration-200 text-left ${
                                        isAvailable 
                                            ? 'border-gray-200 bg-white hover:shadow-lg cursor-pointer' 
                                            : 'border-gray-100 bg-gray-50 cursor-not-allowed opacity-60'
                                    }`
                                },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('div', { className: "flex items-center space-x-4" },
                                            React.createElement('div', { className: "text-3xl" }, level.icon),
                                            React.createElement('div', null,
                                                React.createElement('h3', { className: "text-xl font-medium text-gray-900" }, level.title),
                                                React.createElement('p', { className: "text-gray-600 text-sm mt-1" }, level.description),
                                                React.createElement('p', { 
                                                    className: `text-xs mt-1 ${isAvailable ? 'text-blue-600' : 'text-gray-400'}`
                                                }, isAvailable ? `${subsectionCount} secciones` : 'Próximamente')
                                            )
                                        ),
                                        isAvailable && React.createElement(ChevronRight, { className: "w-6 h-6 text-gray-400" })
                                    )
                                );
                            })
                        )
                    )
                );
            }

            if (appState.currentScreen === 'subsections') {
                return React.createElement('div', { className: "min-h-screen bg-gray-50 p-4" },
                    React.createElement('div', { className: "max-w-md mx-auto" },
                        React.createElement('div', { className: "flex items-center mb-6 pt-4" },
                            React.createElement('button', {
                                onClick: () => updateAppState({ currentScreen: 'levels' }),
                                className: "p-2 hover:bg-gray-200 rounded-full transition-colors"
                            },
                                React.createElement(ChevronLeft, { className: "w-6 h-6 text-gray-600" })
                            ),
                            React.createElement('h2', { className: "text-2xl font-light text-gray-900 ml-4" },
                                levels[appState.selectedLevel].title
                            )
                        ),
                        React.createElement('div', { className: "space-y-4" },
                            Object.entries(subsections[appState.selectedModule][appState.selectedLevel]).map(([key, subsection]) => {
                                const lessonCount = lessons[appState.selectedModule][appState.selectedLevel][key]?.length || 0;
                                const isAvailable = lessonCount > 0;
                                const progress = getSubsectionProgress(appState.selectedModule, appState.selectedLevel, key);
                                const progressPercentage = progress.total > 0 ? Math.round((progress.completed / progress.total) * 100) : 0;
                                
                                return React.createElement('button', {
                                    key: key,
                                    onClick: () => {
                                        if (isAvailable) {
                                            updateAppState({ 
                                                selectedSubsection: key, 
                                                currentLesson: 0, 
                                                score: 0, 
                                                currentScreen: 'lesson' 
                                            });
                                        }
                                    },
                                    disabled: !isAvailable,
                                    className: `w-full p-6 rounded-2xl border-2 transition-all duration-200 text-left ${
                                        isAvailable 
                                            ? `border-gray-200 ${subsection.color} hover:shadow-lg cursor-pointer` 
                                            : 'border-gray-100 bg-gray-50 cursor-not-allowed opacity-60'
                                    }`
                                },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('div', { className: "flex items-center space-x-4" },
                                            React.createElement('div', { className: "text-3xl" }, subsection.icon),
                                            React.createElement('div', null,
                                                React.createElement('h3', { className: "text-xl font-medium text-gray-900" }, subsection.title),
                                                React.createElement('p', { className: "text-gray-600 text-sm mt-1" }, subsection.description),
                                                React.createElement('p', { 
                                                    className: `text-xs mt-1 ${isAvailable ? 'text-blue-600' : 'text-gray-400'}`
                                                }, lessonCount > 0 ? `${lessonCount} lecciones` : 'Próximamente'),
                                                progress.total > 0 && React.createElement('div', { className: "mt-2" },
                                                    React.createElement('div', { className: "w-32 bg-gray-200 rounded-full h-2" },
                                                        React.createElement('div', {
                                                            className: "bg-green-600 h-2 rounded-full",
                                                            style: { width: `${progressPercentage}%` }
                                                        })
                                                    ),
                                                    React.createElement('p', { className: "text-xs text-gray-500 mt-1" },
                                                        `${progressPercentage}% - ${progress.score}/${progress.total} correctas`
                                                    )
                                                )
                                            )
                                        ),
                                        isAvailable && React.createElement(ChevronRight, { className: "w-6 h-6 text-gray-400" })
                                    )
                                );
                            })
                        )
                    )
                );
            }

            if (appState.currentScreen === 'lesson') {
                const currentLessonData = lessons[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection][appState.currentLesson];
                const totalLessons = lessons[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection].length;
                const progressPercent = ((appState.currentLesson + 1) / totalLessons) * 100;

                return React.createElement('div', { className: "min-h-screen bg-gray-50 p-4" },
                    React.createElement('div', { className: "max-w-md mx-auto" },
                        React.createElement('div', { className: "flex items-center justify-between mb-6 pt-4" },
                            React.createElement('button', {
                                onClick: () => updateAppState({ currentScreen: 'subsections' }),
                                className: "p-2 hover:bg-gray-200 rounded-full transition-colors"
                            },
                                React.createElement(ChevronLeft, { className: "w-6 h-6 text-gray-600" })
                            ),
                            React.createElement('div', { className: "flex-1 mx-4" },
                                React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-2" },
                                    React.createElement('div', { 
                                        className: "bg-blue-600 h-2 rounded-full transition-all duration-500",
                                        style: { width: `${progressPercent}%` }
                                    })
                                ),
                                React.createElement('p', { className: "text-xs text-gray-600 mt-1 text-center" },
                                    `${appState.currentLesson + 1} de ${totalLessons} • Puntos: ${appState.score}`
                                )
                            )
                        ),

                        React.createElement('div', { className: "bg-white rounded-2xl p-6 mb-6 shadow-sm" },
                            React.createElement('h3', { className: "text-xl font-medium text-gray-900 mb-4" },
                                currentLessonData.title
                            ),
                            React.createElement('p', { className: "text-gray-700 mb-4" }, currentLessonData.question),

                            currentLessonData.code && React.createElement('div', { className: "bg-gray-900 rounded-lg p-4 mb-4 overflow-x-auto" },
                                React.createElement('pre', { className: "text-green-400 text-sm font-mono whitespace-pre-wrap" },
                                    currentLessonData.code
                                )
                            ),

                            React.createElement('div', { className: "space-y-3" },
                                currentLessonData.type === 'multiple-choice' ?
                                    currentLessonData.options.map((option, index) =>
                                        React.createElement('button', {
                                            key: index,
                                            onClick: () => handleMultipleChoice(index),
                                            disabled: showResult,
                                            className: `w-full p-4 text-left rounded-xl border-2 transition-all duration-200 ${
                                                showResult 
                                                    ? (index === currentLessonData.correct 
                                                        ? 'border-green-500 bg-green-50' 
                                                        : 'border-gray-200 opacity-60')
                                                    : 'border-gray-200 hover:border-blue-300 hover:bg-blue-50'
                                            } disabled:cursor-not-allowed`
                                        },
                                            React.createElement('span', { className: "flex items-center" },
                                                React.createElement('span', { className: "w-6 h-6 rounded-full border-2 border-gray-300 mr-3 flex items-center justify-center text-xs" },
                                                    String.fromCharCode(65 + index)
                                                ),
                                                option
                                            )
                                        )
                                    ) :
                                    React.createElement('div', null,
                                        React.createElement('input', {
                                            type: "text",
                                            value: userAnswer,
                                            onChange: (e) => setUserAnswer(e.target.value),
                                            placeholder: currentLessonData.placeholder || "Escribe tu respuesta...",
                                            className: "w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none transition-colors",
                                            disabled: showResult,
                                            onKeyPress: (e) => e.key === 'Enter' && !showResult && handleFillBlank()
                                        }),
                                        !showResult && React.createElement('button', {
                                            onClick: handleFillBlank,
                                            disabled: !userAnswer.trim(),
                                            className: "w-full mt-3 bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
                                        }, 'Verificar Respuesta')
                                    )
                            )
                        ),

                        showResult && React.createElement('div', { 
                            className: `rounded-2xl p-6 shadow-sm ${isCorrect ? 'bg-green-50 border-2 border-green-200' : 'bg-red-50 border-2 border-red-200'}`
                        },
                            React.createElement('div', { className: "text-center mb-4" },
                                React.createElement('div', { 
                                    className: `w-16 h-16 mx-auto mb-3 flex items-center justify-center rounded-full ${isCorrect ? 'bg-green-100' : 'bg-red-100'}`
                                },
                                    isCorrect ? 
                                        React.createElement(Check, { className: "w-8 h-8 text-green-600" }) :
                                        React.createElement(X, { className: "w-8 h-8 text-red-600" })
                                ),
                                React.createElement('h4', { 
                                    className: `text-lg font-medium mb-2 ${isCorrect ? 'text-green-900' : 'text-red-900'}`
                                }, isCorrect ? '¡Correcto!' : 'Incorrecto'),
                                React.createElement('p', { 
                                    className: `text-sm ${isCorrect ? 'text-green-700' : 'text-red-700'}`
                                }, currentLessonData.explanation)
                            ),
                            React.createElement('button', {
                                onClick: nextLesson,
                                className: "w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition-colors"
                            }, appState.currentLesson < lessons[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection].length - 1 ? 'Siguiente Lección' : 'Ver Resultados')
                        )
                    )
                );
            }

            if (appState.currentScreen === 'completed') {
                const totalLessons = lessons[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection].length;
                const percentage = Math.round((appState.score / totalLessons) * 100);
                
                return React.createElement('div', { className: "min-h-screen bg-gray-50 p-4 flex items-center justify-center" },
                    React.createElement('div', { className: "max-w-md mx-auto text-center" },
                        React.createElement('div', { 
                            className: `w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center ${
                                percentage >= 80 ? 'bg-green-600' : percentage >= 60 ? 'bg-yellow-500' : 'bg-red-500'
                            }`
                        },
                            React.createElement(Award, { className: "w-10 h-10 text-white" })
                        ),
                        React.createElement('h2', { className: "text-3xl font-light text-gray-900 mb-4" }, '¡Sección Completada!'),
                        React.createElement('p', { className: "text-gray-600 mb-2" },
                            `Has terminado ${subsections[appState.selectedModule][appState.selectedLevel][appState.selectedSubsection].title}`
                        ),
                        React.createElement('div', { className: "text-center mb-6" },
                            React.createElement('p', { className: "text-4xl font-bold text-blue-600 mb-2" }, `${percentage}%`),
                            React.createElement('p', { className: "text-gray-600" },
                                `${appState.score} de ${totalLessons} respuestas correctas`
                            )
                        ),
                        React.createElement('div', { className: "space-y-4" },
                            React.createElement('button', {
                                onClick: () => updateAppState({ currentScreen: 'subsections' }),
                                className: "w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition-colors"
                            }, 'Elegir Otra Sección'),
                            React.createElement('button', {
                                onClick: resetApp,
                                className: "w-full border-2 border-gray-300 text-gray-700 py-3 rounded-xl hover:bg-gray-50 transition-colors"
                            }, 'Volver al Inicio')
                        )
                    )
                );
            }

            return React.createElement('div', { className: "loading" }, 'Cargando...');
        };

        // Renderizar la aplicación
        ReactDOM.render(React.createElement(SAPLearningApp), document.getElementById('root'));
    </script>
</body>
</html>

